<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free APA Citation Generator ‚Äî DOI to APA 7, MLA 9, Chicago, Harvard | ResearchToolsLab</title>
<meta name="description" content="Free APA 7 citation generator from DOI. Instantly convert any DOI to perfectly formatted APA, MLA, Chicago, or Harvard citations. BibTeX export, citation anatomy breakdown, confidence scoring. No signup, 100% private. Verified against APA 7th Edition manual.">
<meta name="keywords" content="APA citation generator, free citation generator, DOI to citation, DOI to APA, DOI to BibTeX, APA 7 citation generator, MLA citation generator, MLA 9 citation, Chicago citation generator, Harvard citation generator, reference generator, bibliography generator, cite article from DOI, academic citation tool, free reference generator, BibTeX generator, citation maker, APA format generator, in-text citation generator, citation machine alternative, EasyBib alternative, free APA formatter, research citation tool, thesis reference generator, academic reference maker, DOI lookup citation, Crossref citation, journal article citation, citation style converter">
<meta name="robots" content="index, follow">
<meta name="author" content="ResearchToolsLab">
<link rel="canonical" href="https://researchtoolslab.com/citation-generator.html">
<meta property="og:title" content="Free APA Citation Generator ‚Äî DOI to APA 7, MLA, Chicago, Harvard | ResearchToolsLab">
<meta property="og:description" content="Convert any DOI to perfectly formatted APA 7, MLA 9, Chicago, or Harvard citations. Citation anatomy breakdown, BibTeX export, confidence scoring. Free, private, no signup.">
<meta property="og:url" content="https://researchtoolslab.com/citation-generator.html">
<meta property="og:type" content="website">
<meta property="og:site_name" content="ResearchToolsLab">
<meta property="og:image" content="https://researchtoolslab.com/images/citation-generator-og.png">
<meta property="og:locale" content="en_US">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free APA Citation Generator from DOI ‚Äî G*Power Verified Team | ResearchToolsLab">
<meta name="twitter:description" content="Instantly generate APA 7, MLA 9, Chicago & Harvard citations from any DOI. Free, private, thesis-ready.">
<meta name="twitter:image" content="https://researchtoolslab.com/images/citation-generator-og.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,700;0,9..144,900;1,9..144,700&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<script type="application/ld+json">
{
 "@context":"https://schema.org",
 "@type":"WebApplication",
 "name":"Free APA Citation Generator",
 "url":"https://researchtoolslab.com/citation-generator.html",
 "description":"Convert any DOI to APA 7, MLA 9, Chicago Author-Date, or Harvard citations. Features citation anatomy breakdown, confidence scoring, BibTeX export, and batch mode. Verified against APA 7th Edition Publication Manual.",
 "applicationCategory":"EducationalApplication",
 "operatingSystem":"All",
 "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
 "author":{"@type":"Organization","name":"ResearchToolsLab","url":"https://researchtoolslab.com"},
 "featureList":["DOI to citation","APA 7th Edition","MLA 9th Edition","Chicago Author-Date","Harvard style","BibTeX export","Citation anatomy display","Confidence scoring","Batch mode","Manual entry","In-text citations","100% client-side","No signup required"]
}
</script>
<script type="application/ld+json">
{
 "@context":"https://schema.org",
 "@type":"BreadcrumbList",
 "itemListElement":[
  {"@type":"ListItem","position":1,"name":"Home","item":"https://researchtoolslab.com/"},
  {"@type":"ListItem","position":2,"name":"Citation Generator","item":"https://researchtoolslab.com/citation-generator.html"}
 ]
}
</script>
<script type="application/ld+json">
{
 "@context":"https://schema.org",
 "@type":"FAQPage",
 "mainEntity":[
  {"@type":"Question","name":"How do I generate an APA citation from a DOI?","acceptedAnswer":{"@type":"Answer","text":"Simply paste the DOI (e.g., 10.1037/amp0000255) into the input field and click Generate. The tool fetches metadata from Crossref and formats it according to APA 7th Edition rules automatically. You can then copy the citation or export it as BibTeX."}},
  {"@type":"Question","name":"Is this citation generator accurate?","acceptedAnswer":{"@type":"Answer","text":"Yes. All formatting rules follow the APA 7th Edition Publication Manual, MLA Handbook 9th Edition, Chicago Manual of Style 17th Edition, and standard Harvard conventions. The tool includes a confidence indicator that warns you when metadata is incomplete, so you always know if manual verification is needed."}},
  {"@type":"Question","name":"What citation styles are supported?","acceptedAnswer":{"@type":"Answer","text":"APA 7th Edition, MLA 9th Edition, Chicago Author-Date (17th Edition), and Harvard. Each style is implemented according to its official manual with support for 1-20+ authors, DOI formatting, and proper punctuation rules."}},
  {"@type":"Question","name":"Can I generate multiple citations at once?","acceptedAnswer":{"@type":"Answer","text":"Yes. Use Batch Mode to paste multiple DOIs (one per line) and generate all citations simultaneously. You can copy the entire reference list or export all as a .bib file."}},
  {"@type":"Question","name":"Is my data private?","acceptedAnswer":{"@type":"Answer","text":"Absolutely. The only external request is to Crossref (a free, open academic metadata API) to fetch article information. No data is stored on our servers. The formatting happens entirely in your browser. No signup, no cookies, no tracking."}},
  {"@type":"Question","name":"What if my DOI is not found?","acceptedAnswer":{"@type":"Answer","text":"If Crossref doesn't have metadata for your DOI, use the Manual Entry tab to input the citation fields yourself. The tool will still format them correctly in your chosen style."}},
  {"@type":"Question","name":"How is this different from Citation Machine or EasyBib?","acceptedAnswer":{"@type":"Answer","text":"Unlike most citation generators, this tool is completely free with no signup, shows a citation anatomy breakdown so you understand the formatting rules, includes a confidence indicator for data quality, and runs 100% in your browser with no data collection. No ads, no premium tier, no paywalls."}},
  {"@type":"Question","name":"Does this tool generate in-text citations?","acceptedAnswer":{"@type":"Answer","text":"Yes. Both parenthetical and narrative in-text citation formats are generated automatically for every style. For APA, you get both (Smith, 2020) and Smith (2020) formats."}}
 ]
}
</script>
<script type="application/ld+json">
{
 "@context":"https://schema.org",
 "@type":"HowTo",
 "name":"How to Generate an APA Citation from a DOI",
 "description":"Step-by-step guide to creating a perfectly formatted APA 7 citation using a DOI.",
 "step":[
  {"@type":"HowToStep","position":1,"name":"Find your DOI","text":"Locate the DOI on the article page, usually near the title or in the footer. It looks like 10.xxxx/xxxxx."},
  {"@type":"HowToStep","position":2,"name":"Paste the DOI","text":"Enter the DOI into the citation generator input field. You can paste the full URL (https://doi.org/10.xxxx) or just the DOI number."},
  {"@type":"HowToStep","position":3,"name":"Click Generate","text":"Click the Generate Citation button. The tool fetches metadata from Crossref and formats it in APA 7."},
  {"@type":"HowToStep","position":4,"name":"Review and copy","text":"Check the citation anatomy breakdown, verify the confidence indicator, then click Copy to clipboard or export as BibTeX."}
 ]
}
</script>
<style>
:root{
 --cream:#f5f0e8;--cream2:#ede7d9;--cream3:#e4ddd0;--white:#fff;
 --ink:#1a1612;--ink2:#3d3530;--ink3:#7a6f65;--ink4:#b0a89e;
 --rust:#c8441a;--rust2:#e05228;--rust-l:rgba(200,68,26,.08);
 --teal:#1a7a6e;--teal-l:rgba(26,122,110,.08);--teal2:#15685e;
 --success:#0f9b6e;--success-l:rgba(15,155,110,.08);--success-b:rgba(15,155,110,.25);
 --warn:#b45a00;--warn-l:rgba(180,90,0,.07);--warn-b:rgba(180,90,0,.2);
 --err:#c8221a;--err-l:rgba(200,34,26,.07);--err-b:rgba(200,34,26,.2);
 --blue:#2563eb;--blue-l:rgba(37,99,235,.08);
 --border:rgba(26,22,18,.1);--border2:rgba(26,22,18,.16);
 --shadow-sm:0 2px 12px rgba(26,22,18,.07);
 --shadow-md:0 8px 40px rgba(26,22,18,.12);
 --serif:'Fraunces',Georgia,serif;
 --sans:'DM Sans',sans-serif;
 --mono:'DM Mono',monospace;
 --r-sm:8px;--r-md:14px;--r-lg:20px;--r-xl:28px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:var(--sans);background:var(--cream);color:var(--ink);font-size:16px;line-height:1.6;min-height:100vh}
body::after{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='.025'/%3E%3C/svg%3E");pointer-events:none;z-index:9999;mix-blend-mode:multiply}
a{text-decoration:none;color:inherit}
.nav{position:sticky;top:0;z-index:200;background:rgba(245,240,232,.93);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.nav-wrap{max-width:1200px;margin:0 auto;padding:0 2rem;height:62px;display:flex;align-items:center;justify-content:space-between;gap:2rem}
.logo{display:flex;align-items:center;gap:.6rem;flex-shrink:0}
.logo-mark{width:34px;height:34px;background:var(--ink);border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-family:var(--serif);font-size:1.05rem;font-weight:900;color:var(--cream);letter-spacing:-.05em}
.logo-name{font-family:var(--serif);font-size:1.15rem;font-weight:700;color:var(--ink);letter-spacing:-.03em}
.logo-name em{color:var(--rust);font-style:normal}
.nav-links{display:flex;align-items:center;gap:.15rem;list-style:none}
.nav-links a{padding:.4rem .85rem;font-size:.86rem;font-weight:500;color:var(--ink2);border-radius:var(--r-sm);transition:all .18s}
.nav-links a:hover{background:var(--cream2);color:var(--ink)}
.nav-cta{background:var(--rust)!important;color:#fff!important;font-weight:600!important;padding:.4rem 1rem!important}
.nav-cta:hover{background:var(--rust2)!important;transform:translateY(-1px)!important;box-shadow:0 4px 16px rgba(200,68,26,.3)!important}
.hamburger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:6px;border:none;background:none}
.hamburger span{display:block;width:22px;height:2px;background:var(--ink);border-radius:2px;transition:all .2s}
.page-wrap{max-width:800px;margin:0 auto;padding:2.5rem 1.5rem 4rem}
.page-header{text-align:center;margin-bottom:2.25rem}
.page-breadcrumb{display:flex;align-items:center;justify-content:center;gap:.5rem;font-family:var(--mono);font-size:.68rem;color:var(--ink4);letter-spacing:.06em;text-transform:uppercase;margin-bottom:1.25rem}
.page-breadcrumb a:hover{color:var(--rust)}
.page-h1{font-family:var(--serif);font-size:clamp(1.7rem,4vw,2.4rem);font-weight:900;color:var(--ink);letter-spacing:-.04em;margin-bottom:.5rem;line-height:1.1}
.page-h1 em{color:var(--rust);font-style:italic}
.page-sub{font-size:.92rem;color:var(--ink3);max-width:560px;margin:0 auto;font-weight:300;line-height:1.7}
.page-badges{display:flex;align-items:center;justify-content:center;gap:.5rem;flex-wrap:wrap;margin-top:1rem}
.page-badge{display:inline-flex;align-items:center;gap:.3rem;background:var(--teal-l);border:1px solid rgba(26,122,110,.2);border-radius:20px;padding:.22rem .7rem;font-size:.68rem;color:var(--teal);font-family:var(--mono);font-weight:500}
.tool-card{background:var(--white);border-radius:var(--r-xl);box-shadow:var(--shadow-md);border:1px solid var(--border);position:relative;overflow:hidden}
.tool-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--rust),#e07840,var(--teal))}
.tool-inner{padding:2rem}
.input-tabs{display:flex;gap:.35rem;margin-bottom:1.25rem;border-bottom:2px solid var(--border);padding-bottom:0}
.input-tab{padding:.6rem 1.1rem;font-size:.84rem;font-weight:500;color:var(--ink3);cursor:pointer;border:none;background:none;font-family:var(--sans);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .18s}
.input-tab:hover{color:var(--ink)}
.input-tab.active{color:var(--rust);border-bottom-color:var(--rust);font-weight:600}
.tab-panel{display:none}
.tab-panel.active{display:block}
.slabel{font-family:var(--mono);font-size:.68rem;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--ink4);margin-bottom:.6rem;margin-top:1.1rem;display:block}
.form-row{margin-bottom:1rem}
label{display:block;font-size:.84rem;font-weight:500;margin-bottom:.35rem;color:var(--ink2)}
.hint{font-weight:400;color:var(--ink4);font-size:.76rem;margin-left:.35rem}
input[type=text],input[type=number],textarea,select{width:100%;padding:.62rem .9rem;border:1.5px solid var(--border2);border-radius:var(--r-md);font-family:var(--sans);font-size:.93rem;background:var(--white);color:var(--ink);transition:border-color .18s;-webkit-appearance:none;appearance:none}
textarea{resize:vertical;min-height:80px;font-size:.88rem;line-height:1.6}
select{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%237a6f65' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .9rem center;padding-right:2.5rem;cursor:pointer}
input:focus,textarea:focus,select:focus{outline:none;border-color:var(--rust);box-shadow:0 0 0 3px rgba(200,68,26,.12)}
.inline-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.inline-row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}
.doi-input-wrap{display:flex;gap:.5rem}
.doi-input-wrap input{flex:1}
.btn-gen{padding:.65rem 1.5rem;background:var(--rust);color:#fff;border:none;border-radius:var(--r-md);font-family:var(--sans);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap}
.btn-gen:hover{background:var(--rust2);transform:translateY(-1px);box-shadow:0 4px 16px rgba(200,68,26,.3)}
.btn-gen:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
.btn-gen-full{width:100%;padding:.9rem;font-size:1rem;margin-top:.5rem}
.style-tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:.4rem;margin-bottom:1rem}
.style-tab{padding:.55rem .5rem;background:var(--cream);border:1.5px solid var(--border);border-radius:var(--r-md);font-size:.8rem;font-weight:500;color:var(--ink2);cursor:pointer;text-align:center;transition:all .18s;font-family:var(--sans)}
.style-tab:hover{background:var(--cream2);border-color:var(--ink4)}
.style-tab.active{background:var(--rust);color:#fff;border-color:var(--rust);font-weight:600}
.result{display:none;margin-top:1.5rem}
.result.show{display:block}
.confidence{display:flex;align-items:center;gap:.5rem;padding:.65rem 1rem;border-radius:var(--r-md);font-size:.82rem;font-weight:500;margin-bottom:1rem}
.confidence.high{background:var(--success-l);border:1px solid var(--success-b);color:var(--success)}
.confidence.medium{background:var(--warn-l);border:1px solid var(--warn-b);color:var(--warn)}
.confidence.low{background:var(--err-l);border:1px solid var(--err-b);color:var(--err)}
.confidence-icon{font-size:1.1rem}
.cite-box{background:var(--cream);border:1px solid var(--border);border-left:3px solid var(--rust);border-radius:var(--r-md);padding:1.1rem 1.25rem;font-size:.92rem;line-height:1.75;color:var(--ink);margin-bottom:.75rem;position:relative;cursor:text;word-break:break-word}
.cite-box .cite-label{position:absolute;top:-.55rem;left:.75rem;background:var(--white);padding:0 .4rem;font-family:var(--mono);font-size:.62rem;color:var(--rust);font-weight:500;letter-spacing:.08em;text-transform:uppercase}
.intext-box{background:var(--blue-l);border:1px solid rgba(37,99,235,.2);border-left:3px solid var(--blue);border-radius:var(--r-md);padding:.85rem 1.1rem;font-size:.88rem;line-height:1.65;color:var(--ink2);margin-bottom:.75rem}
.intext-label{font-family:var(--mono);font-size:.62rem;color:var(--blue);font-weight:500;letter-spacing:.08em;text-transform:uppercase;margin-bottom:.3rem}
.anatomy{background:var(--white);border:1px solid var(--border);border-radius:var(--r-md);padding:1.1rem;margin-bottom:1rem;overflow-x:auto}
.anatomy-title{font-family:var(--mono);font-size:.68rem;color:var(--ink4);font-weight:500;letter-spacing:.08em;text-transform:uppercase;margin-bottom:.75rem}
.anatomy-cite{font-size:.88rem;line-height:2.6;font-family:var(--sans);color:var(--ink)}
.anatomy-cite .a-seg{display:inline;position:relative;border-bottom:2px solid;padding-bottom:1.2rem}
.anatomy-cite .a-seg::after{content:attr(data-label);position:absolute;bottom:-.15rem;left:50%;transform:translateX(-50%);font-family:var(--mono);font-size:.58rem;font-weight:500;letter-spacing:.06em;text-transform:uppercase;white-space:nowrap}
.a-author{border-color:#c8441a;color:#c8441a}.a-author::after{color:#c8441a}
.a-year{border-color:#2563eb;color:#2563eb}.a-year::after{color:#2563eb}
.a-title{border-color:#7c3aed;color:#7c3aed}.a-title::after{color:#7c3aed}
.a-journal{border-color:#0f9b6e;color:#0f9b6e}.a-journal::after{color:#0f9b6e}
.a-vol{border-color:#b45a00;color:#b45a00}.a-vol::after{color:#b45a00}
.a-pages{border-color:#64748b;color:#64748b}.a-pages::after{color:#64748b}
.a-doi{border-color:#1a7a6e;color:#1a7a6e}.a-doi::after{color:#1a7a6e}
.btn-row{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.75rem}
.btn-copy{display:inline-flex;align-items:center;gap:.35rem;padding:.5rem 1rem;background:var(--teal);color:#fff;border:none;border-radius:var(--r-sm);font-size:.82rem;font-weight:500;cursor:pointer;transition:all .18s;font-family:var(--sans)}
.btn-copy:hover{background:var(--teal2)}
.btn-secondary{display:inline-flex;align-items:center;gap:.35rem;padding:.5rem 1rem;background:var(--cream);color:var(--ink2);border:1px solid var(--border2);border-radius:var(--r-sm);font-size:.82rem;font-weight:500;cursor:pointer;transition:all .18s;font-family:var(--sans)}
.btn-secondary:hover{background:var(--cream2);border-color:var(--ink4)}
.bibtex-box{display:none;background:var(--ink);color:#a8e6a3;border-radius:var(--r-md);padding:1rem;font-family:var(--mono);font-size:.78rem;line-height:1.7;margin-top:.75rem;white-space:pre-wrap;word-break:break-all;position:relative}
.bibtex-box.show{display:block}
.bibtex-copy{position:absolute;top:.5rem;right:.5rem;padding:.3rem .6rem;background:rgba(255,255,255,.15);color:#fff;border:none;border-radius:4px;font-size:.7rem;cursor:pointer;font-family:var(--sans)}
.bibtex-copy:hover{background:rgba(255,255,255,.25)}
.info-box{background:var(--teal-l);border:1px solid rgba(26,122,110,.2);border-radius:var(--r-md);padding:.85rem 1rem;font-size:.84rem;line-height:1.65;color:var(--ink2);margin-bottom:1.25rem}
.warn-box{background:var(--warn-l);border:1px solid var(--warn-b);border-radius:var(--r-md);padding:.85rem 1rem;font-size:.84rem;line-height:1.65;color:var(--ink2);margin-bottom:1rem}
.err-box{background:var(--err-l);border:1px solid var(--err-b);border-radius:var(--r-md);padding:.85rem 1rem;font-size:.84rem;line-height:1.65;color:var(--err);margin-bottom:1rem}
.batch-results{margin-top:1rem}
.batch-item{background:var(--cream);border:1px solid var(--border);border-radius:var(--r-md);padding:1rem;margin-bottom:.75rem}
.batch-item .batch-doi{font-family:var(--mono);font-size:.72rem;color:var(--ink4);margin-bottom:.4rem}
.batch-item .batch-cite{font-size:.88rem;line-height:1.7;color:var(--ink)}
.batch-item .batch-err{color:var(--err);font-size:.84rem}
.loading{display:inline-flex;align-items:center;gap:.5rem;color:var(--ink3);font-size:.88rem}
.spinner{width:18px;height:18px;border:2px solid var(--border);border-top-color:var(--rust);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.content-section{margin-top:2.5rem}
.content-card{background:var(--white);border-radius:var(--r-xl);box-shadow:var(--shadow-sm);border:1px solid var(--border);padding:2rem;margin-bottom:1.5rem}
.content-card h2{font-family:var(--serif);font-size:1.35rem;font-weight:700;color:var(--ink);letter-spacing:-.03em;margin-bottom:1rem;line-height:1.2}
.content-card h2 em{color:var(--rust);font-style:italic}
.content-card h3{font-family:var(--serif);font-size:1.05rem;font-weight:700;color:var(--ink);letter-spacing:-.02em;margin-top:1.25rem;margin-bottom:.5rem;line-height:1.3}
.content-card p{font-size:.9rem;color:var(--ink2);line-height:1.75;margin-bottom:.75rem}
.content-card ul,.content-card ol{font-size:.9rem;color:var(--ink2);line-height:1.75;margin-bottom:.75rem;padding-left:1.5rem}
.content-card li{margin-bottom:.4rem}
.content-card code{font-family:var(--mono);background:var(--cream);padding:.15rem .4rem;border-radius:4px;font-size:.85rem}
.example-box{background:var(--cream);border:1px solid var(--border);border-left:3px solid var(--teal);border-radius:var(--r-md);padding:1rem 1.25rem;margin:.75rem 0 1rem;font-size:.88rem;line-height:1.75;color:var(--ink)}
.example-label{font-family:var(--mono);font-size:.65rem;color:var(--teal);font-weight:500;letter-spacing:.08em;text-transform:uppercase;margin-bottom:.3rem}
.comparison-table{width:100%;border-collapse:collapse;font-size:.82rem;margin:1rem 0;border:1px solid var(--border);border-radius:var(--r-md);overflow:hidden}
.comparison-table th{background:var(--cream2);padding:.6rem .75rem;text-align:left;font-weight:600;color:var(--ink2);border-bottom:1px solid var(--border)}
.comparison-table td{padding:.55rem .75rem;border-bottom:1px solid var(--border);color:var(--ink2);vertical-align:top}
.comparison-table tr:last-child td{border-bottom:none}
.features-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-top:1rem}
.feature-item{background:var(--cream);border-radius:var(--r-md);padding:1rem;border:1px solid var(--border)}
.feature-icon{font-size:1.5rem;margin-bottom:.5rem}
.feature-item h3{font-family:var(--serif);font-size:.92rem;font-weight:700;color:var(--ink);margin:0 0 .35rem;letter-spacing:-.02em}
.feature-item p{font-size:.8rem;color:var(--ink3);margin:0;line-height:1.55}
.faq-item{border-bottom:1px solid var(--border);padding:1rem 0}
.faq-item:last-child{border-bottom:none}
.faq-q{font-family:var(--serif);font-size:.95rem;font-weight:700;color:var(--ink);cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:1rem;transition:color .18s}
.faq-q:hover{color:var(--rust)}
.faq-arrow{font-size:.7rem;color:var(--ink4);transition:transform .25s;flex-shrink:0}
.faq-item.open .faq-arrow{transform:rotate(180deg);color:var(--rust)}
.faq-a{max-height:0;overflow:hidden;transition:max-height .35s ease,padding .35s ease;font-size:.88rem;color:var(--ink3);line-height:1.7}
.faq-item.open .faq-a{max-height:500px;padding-top:.75rem}
.related-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-top:1rem}
.related-item{display:flex;align-items:center;gap:.75rem;background:var(--cream);border:1px solid var(--border);border-radius:var(--r-md);padding:.85rem 1rem;transition:all .18s;text-decoration:none;color:var(--ink)}
.related-item:hover{background:var(--cream2);border-color:var(--rust);transform:translateY(-1px);box-shadow:var(--shadow-sm)}
.related-icon{font-size:1.3rem;flex-shrink:0}
.related-info h4{font-size:.85rem;font-weight:600;color:var(--ink);margin-bottom:.15rem}
.related-info p{font-size:.72rem;color:var(--ink4);margin:0;line-height:1.4}
.site-footer{background:var(--cream2);border-top:1px solid var(--border);padding:2.5rem 2rem 2rem;margin-top:3rem}
.sf-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}
.sf-brand{font-family:var(--serif);font-size:1rem;font-weight:700;color:var(--ink);letter-spacing:-.03em}
.sf-brand em{color:var(--rust);font-style:normal}
.sf-copy{font-size:.78rem;color:var(--ink4);font-weight:300}
.sf-links{display:flex;gap:1.5rem}
.sf-links a{font-size:.78rem;color:var(--ink4);transition:color .18s}
.sf-links a:hover{color:var(--rust)}
@media(max-width:600px){
 .page-wrap{padding:1.25rem 1rem 3rem}
 .tool-inner,.content-card{padding:1.25rem}
 .nav-links{display:none}
 .hamburger{display:flex}
 .inline-row,.inline-row-3{grid-template-columns:1fr}
 .style-tabs{grid-template-columns:repeat(2,1fr)}
 .doi-input-wrap{flex-direction:column}
 .features-grid{grid-template-columns:1fr}
 .related-grid{grid-template-columns:1fr}
 .sf-inner{flex-direction:column;text-align:center}
 .btn-row{flex-direction:column}
 .anatomy-cite .a-seg{display:block;margin-bottom:1rem;padding-bottom:1.4rem}
}
</style>
</head>
<body>

<noscript>
<div style="background:#c8221a;color:#fff;text-align:center;padding:1rem;font-size:.9rem">This citation generator requires JavaScript. Please enable it in your browser settings.</div>
</noscript>

<nav class="nav" role="navigation" aria-label="Main navigation">
<div class="nav-wrap">
 <a href="/" class="logo" aria-label="ResearchToolsLab home">
  <div class="logo-mark" aria-hidden="true">R</div>
  <span class="logo-name">Research<em>Tools</em>Lab</span>
 </a>
 <ul class="nav-links" role="list">
  <li><a href="/">Home</a></li>
  <li><a href="/sample-size-calculator.html">Sample Size</a></li>
  <li><a href="/percent.html">Percentage</a></li>
  <li><a href="/pdf.html">Invoice</a></li>
  <li><a href="/" class="nav-cta">‚Üê All Tools</a></li>
 </ul>
 <button class="hamburger" aria-label="Open menu" onclick="navToggle()"><span></span><span></span><span></span></button>
</div>
</nav>

<main>
<div class="page-wrap">

<header class="page-header">
 <nav class="page-breadcrumb" aria-label="Breadcrumb">
  <a href="/">ResearchToolsLab</a><span aria-hidden="true">‚Ä∫</span><span aria-current="page">Citation Generator</span>
 </nav>
 <h1 class="page-h1">Free <em>Citation Generator</em></h1>
 <p class="page-sub">Paste a DOI, get a perfectly formatted APA 7, MLA 9, Chicago, or Harvard citation ‚Äî with anatomy breakdown, in-text citation, and BibTeX export. 100% free and private.</p>
 <div class="page-badges">
  <span class="page-badge">üìñ APA 7 ¬∑ MLA 9 ¬∑ Chicago ¬∑ Harvard</span>
  <span class="page-badge">üî¨ Crossref Verified</span>
  <span class="page-badge">üìã BibTeX Export</span>
  <span class="page-badge">üîí 100% Private</span>
  <span class="page-badge">‚úì Free Forever</span>
 </div>
</header>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOOL CARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="tool-card" id="calculator-top">
<div class="tool-inner">

 <div class="info-box">
  <strong>Formatting verified against APA 7th Edition Publication Manual</strong>, MLA Handbook 9th Edition, and Chicago Manual of Style 17th Edition.
  Supports 1‚Äì21+ authors ¬∑ DOI formatting ¬∑ in-text citations ¬∑ BibTeX export ¬∑ citation anatomy breakdown ¬∑ confidence scoring.
  All processing happens in your browser ‚Äî your references never leave your device.
 </div>

 <!-- Input Tabs -->
 <div class="input-tabs">
  <button class="input-tab active" data-tab="doi" onclick="switchInputTab('doi')">DOI Lookup</button>
  <button class="input-tab" data-tab="manual" onclick="switchInputTab('manual')">Manual Entry</button>
  <button class="input-tab" data-tab="batch" onclick="switchInputTab('batch')">Batch Mode</button>
 </div>

 <!-- DOI Tab -->
 <div class="tab-panel active" id="tab-doi">
  <div class="form-row">
   <label for="doiInput">Enter DOI <span class="hint">e.g. 10.1037/amp0000255 or full URL</span></label>
   <div class="doi-input-wrap">
    <input type="text" id="doiInput" placeholder="10.1037/amp0000255 or https://doi.org/10.1037/amp0000255" autocomplete="off" spellcheck="false">
    <button class="btn-gen" onclick="generateFromDOI()" id="btnGenDoi">Generate</button>
   </div>
  </div>
 </div>

 <!-- Manual Tab -->
 <div class="tab-panel" id="tab-manual">
  <span class="slabel">Article Information</span>
  <div class="form-row">
   <label for="manAuthors">Authors <span class="hint">One per line: Last, First M.</span></label>
   <textarea id="manAuthors" rows="3" placeholder="Smith, John A.&#10;Jones, Maria B.&#10;Williams, Chris"></textarea>
  </div>
  <div class="inline-row">
   <div class="form-row">
    <label for="manYear">Year</label>
    <input type="text" id="manYear" placeholder="2024">
   </div>
   <div class="form-row">
    <label for="manTitle">Article Title</label>
    <input type="text" id="manTitle" placeholder="Effects of sleep deprivation on cognition">
   </div>
  </div>
  <div class="inline-row">
   <div class="form-row">
    <label for="manJournal">Journal Name</label>
    <input type="text" id="manJournal" placeholder="Journal of Experimental Psychology">
   </div>
   <div class="form-row">
    <label for="manDoi">DOI <span class="hint">optional</span></label>
    <input type="text" id="manDoi" placeholder="10.1037/xge0000123">
   </div>
  </div>
  <div class="inline-row-3">
   <div class="form-row">
    <label for="manVol">Volume</label>
    <input type="text" id="manVol" placeholder="45">
   </div>
   <div class="form-row">
    <label for="manIssue">Issue <span class="hint">optional</span></label>
    <input type="text" id="manIssue" placeholder="3">
   </div>
   <div class="form-row">
    <label for="manPages">Pages</label>
    <input type="text" id="manPages" placeholder="123‚Äì145">
   </div>
  </div>
  <button class="btn-gen btn-gen-full" onclick="generateFromManual()">Generate Citation</button>
 </div>

 <!-- Batch Tab -->
 <div class="tab-panel" id="tab-batch">
  <div class="form-row">
   <label for="batchInput">Paste multiple DOIs <span class="hint">One per line, up to 20</span></label>
   <textarea id="batchInput" rows="6" placeholder="10.1037/amp0000255&#10;10.1038/s41586-020-2649-2&#10;10.1126/science.abc4346"></textarea>
  </div>
  <button class="btn-gen btn-gen-full" onclick="generateBatch()" id="btnBatch">Generate All Citations</button>
 </div>

 <!-- Style Selection -->
 <span class="slabel">Citation Style</span>
 <div class="style-tabs">
  <button class="style-tab active" data-style="apa" onclick="switchStyle('apa')">APA 7</button>
  <button class="style-tab" data-style="mla" onclick="switchStyle('mla')">MLA 9</button>
  <button class="style-tab" data-style="chicago" onclick="switchStyle('chicago')">Chicago</button>
  <button class="style-tab" data-style="harvard" onclick="switchStyle('harvard')">Harvard</button>
 </div>

 <!-- Result -->
 <div class="result" id="result"></div>

</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SEO CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="content-section" aria-label="Citation generator information">

<div class="content-card">
 <h2>What Is a <em>Citation Generator</em> and Why Do You Need One?</h2>
 <p>A citation generator is a tool that automatically formats bibliographic references according to a specific style guide ‚Äî such as <strong>APA 7th Edition</strong>, <strong>MLA 9th Edition</strong>, <strong>Chicago Manual of Style</strong>, or <strong>Harvard referencing</strong>. Instead of manually arranging author names, italics, punctuation, and DOI links according to complex rules, you provide the article's metadata (or just a DOI) and the tool produces a correctly formatted citation.</p>
 <p>Proper citation formatting is essential for <strong>academic integrity</strong>, <strong>avoiding plagiarism</strong>, and meeting the submission requirements of journals, universities, and publishers. Even experienced researchers spend significant time formatting reference lists ‚Äî time that a citation generator can reclaim. For students writing a thesis or dissertation, formatting errors in the reference list are among the most common reasons for revision requests from supervisors and committees.</p>
 <p>This tool fetches metadata from <strong>Crossref</strong> ‚Äî the authoritative registry used by over 18,000 publishers ‚Äî ensuring your citation data is accurate and complete. Unlike many competing tools, all formatting happens <strong>entirely in your browser</strong>: no data is sent to our servers, no account is required, and no usage limits apply.</p>
</div>

<div class="content-card">
 <h2>Why Use <em>This</em> Citation Generator?</h2>
 <p>Most online citation generators are ad-heavy, inaccurate, or require paid subscriptions for basic features. This tool is built by the same team behind the <a href="/sample-size-calculator.html" style="color:var(--rust);font-weight:500">G*Power-verified sample size calculator</a> ‚Äî with the same commitment to accuracy, transparency, and researcher-friendly design.</p>
 <div class="features-grid">
  <div class="feature-item">
   <div class="feature-icon">üî¨</div>
   <h3>Citation Anatomy Display</h3>
   <p>See exactly which part of your citation is the author, title, journal, volume, and DOI ‚Äî color-coded so you learn the rules, not just copy-paste.</p>
  </div>
  <div class="feature-item">
   <div class="feature-icon">‚úÖ</div>
   <h3>Confidence Scoring</h3>
   <p>Every citation includes a confidence indicator showing whether all metadata fields were found. You always know if manual verification is needed.</p>
  </div>
  <div class="feature-item">
   <div class="feature-icon">üìñ</div>
   <h3>4 Major Styles</h3>
   <p>APA 7th Edition, MLA 9th Edition, Chicago Author-Date (17th Ed.), and Harvard ‚Äî all verified against their official manuals.</p>
  </div>
  <div class="feature-item">
   <div class="feature-icon">üìù</div>
   <h3>In-Text Citations</h3>
   <p>Both parenthetical and narrative in-text citation formats generated automatically. Copy directly into your paper.</p>
  </div>
  <div class="feature-item">
   <div class="feature-icon">üì¶</div>
   <h3>BibTeX Export</h3>
   <p>Export any citation as BibTeX for LaTeX users. Copy or download as .bib file. Compatible with Overleaf, TeXstudio, and all LaTeX editors.</p>
  </div>
  <div class="feature-item">
   <div class="feature-icon">üîí</div>
   <h3>100% Private</h3>
   <p>Metadata is fetched from Crossref (open API). Formatting happens locally. No data stored, no tracking, no signup, no cookies.</p>
  </div>
 </div>
</div>

<div class="content-card">
 <h2>Supported <em>Citation Styles</em> &amp; Formatting Rules</h2>

 <h3>APA 7th Edition (American Psychological Association)</h3>
 <p>The most widely used citation style in the social sciences, psychology, education, and nursing. APA 7 was published in 2019 and introduced significant changes from APA 6, including listing up to 20 authors (previously capped at 7), new DOI formatting as URLs, and simplified publisher location rules.</p>
 <div class="example-box">
  <div class="example-label">APA 7 Example ‚Äî Journal Article</div>
  Smith, J. A., &amp; Jones, M. B. (2024). Effects of sleep deprivation on cognitive performance in university students. <em>Journal of Experimental Psychology, 45</em>(3), 123‚Äì145. https://doi.org/10.1037/xge0000123
 </div>

 <h3>MLA 9th Edition (Modern Language Association)</h3>
 <p>Standard in the humanities, literature, languages, and cultural studies. MLA 9 (2021) uses a container-based approach to citations, where the journal is the "container" for the article. It emphasizes author names in full, uses quotation marks around article titles, and italicizes journal names.</p>
 <div class="example-box">
  <div class="example-label">MLA 9 Example ‚Äî Journal Article</div>
  Smith, John A., and Maria B. Jones. "Effects of Sleep Deprivation on Cognitive Performance in University Students." <em>Journal of Experimental Psychology</em>, vol. 45, no. 3, 2024, pp. 123‚Äì145. DOI.org, https://doi.org/10.1037/xge0000123.
 </div>

 <h3>Chicago Author-Date (17th Edition)</h3>
 <p>Used across many disciplines including history, social sciences, and natural sciences. The author-date system (as opposed to notes-bibliography) places the year prominently after the author name, similar to APA but with different punctuation and capitalization conventions.</p>
 <div class="example-box">
  <div class="example-label">Chicago Author-Date Example</div>
  Smith, John A., and Maria B. Jones. 2024. "Effects of Sleep Deprivation on Cognitive Performance in University Students." <em>Journal of Experimental Psychology</em> 45 (3): 123‚Äì145. https://doi.org/10.1037/xge0000123.
 </div>

 <h3>Harvard Referencing</h3>
 <p>Widely used in the UK, Australia, and many international universities. Harvard is not governed by a single manual but follows established conventions. It places the year immediately after the author, uses sentence case for titles, and formats the journal name in italics.</p>
 <div class="example-box">
  <div class="example-label">Harvard Example</div>
  Smith, J.A. and Jones, M.B. (2024) 'Effects of sleep deprivation on cognitive performance in university students', <em>Journal of Experimental Psychology</em>, 45(3), pp. 123‚Äì145. doi:10.1037/xge0000123.
 </div>

 <h3>Style Comparison at a Glance</h3>
 <table class="comparison-table">
  <thead><tr><th>Feature</th><th>APA 7</th><th>MLA 9</th><th>Chicago</th><th>Harvard</th></tr></thead>
  <tbody>
   <tr><td>Author format</td><td>Last, F. M.</td><td>Last, First M.</td><td>Last, First M.</td><td>Last, F.M.</td></tr>
   <tr><td>Year position</td><td>After author in ()</td><td>End of citation</td><td>After author, no ()</td><td>After author in ()</td></tr>
   <tr><td>Article title</td><td>Sentence case</td><td>Title Case in ""</td><td>"Sentence case"</td><td>'Sentence case'</td></tr>
   <tr><td>Journal name</td><td><em>Italic</em></td><td><em>Italic</em></td><td><em>Italic</em></td><td><em>Italic</em></td></tr>
   <tr><td>DOI format</td><td>https://doi.org/‚Ä¶</td><td>https://doi.org/‚Ä¶</td><td>https://doi.org/‚Ä¶</td><td>doi:‚Ä¶</td></tr>
   <tr><td>Max authors listed</td><td>20</td><td>2 + et al.</td><td>10</td><td>3 + et al.</td></tr>
  </tbody>
 </table>
</div>

<div class="content-card">
 <h2>How to Use This <em>Citation Generator</em></h2>

 <h3>Step 1: Find the DOI</h3>
 <p>The DOI (Digital Object Identifier) is a permanent link to a published work. You can find it on the article's webpage, in its PDF header or footer, or in database records (PubMed, Google Scholar, Scopus). A DOI looks like <code>10.1037/amp0000255</code> or as a URL: <code>https://doi.org/10.1037/amp0000255</code>.</p>

 <h3>Step 2: Paste and Generate</h3>
 <p>Enter the DOI in the input field ‚Äî you can paste the full URL or just the DOI number. Click <strong>Generate</strong>. The tool fetches metadata from Crossref (the authoritative DOI registry used by 18,000+ publishers) and formats it in your chosen style.</p>

 <h3>Step 3: Review the Citation Anatomy</h3>
 <p>The <strong>citation anatomy display</strong> color-codes each component ‚Äî authors, year, title, journal, volume/issue, pages, and DOI ‚Äî so you can see exactly how the citation is structured. This helps you learn the formatting rules and catch any issues with the source metadata.</p>

 <h3>Step 4: Check the Confidence Score</h3>
 <p>The <strong>confidence indicator</strong> tells you whether all expected metadata fields were found. A green "High Confidence" means all fields are present. Yellow means some fields (like volume or pages) are missing ‚Äî common for ahead-of-print articles. Red means critical fields are missing and manual verification is recommended.</p>

 <h3>Step 5: Copy or Export</h3>
 <p>Click <strong>Copy Citation</strong> to copy the formatted text to your clipboard. For LaTeX users, click <strong>Show BibTeX</strong> to reveal the BibTeX entry, which you can copy or download as a <code>.bib</code> file.</p>
</div>

<div class="content-card">
 <h2>Understanding <em>DOI</em> (Digital Object Identifier)</h2>
 <p>A DOI is a unique, permanent identifier assigned to a digital object ‚Äî most commonly a journal article, book chapter, or dataset. DOIs are managed by the <strong>International DOI Foundation</strong> and resolved through services like Crossref, DataCite, and mEDRA.</p>
 <p>Every DOI consists of a prefix (identifying the publisher) and a suffix (identifying the specific work), separated by a forward slash. For example, in <code>10.1037/amp0000255</code>, the prefix <code>10.1037</code> identifies the American Psychological Association, and <code>amp0000255</code> identifies the specific article.</p>
 <p>DOIs are <strong>persistent</strong> ‚Äî unlike URLs, which can change when websites are restructured, a DOI always resolves to the current location of the content. This is why citation styles now prefer DOIs over URLs for referencing published works. Since APA 7, DOIs are formatted as full URLs: <code>https://doi.org/10.1037/amp0000255</code>.</p>
 <p>This citation generator accepts DOIs in any format ‚Äî bare DOI (<code>10.1037/amp0000255</code>), URL format (<code>https://doi.org/10.1037/amp0000255</code>), or even with the older <code>doi:</code> prefix. All are automatically cleaned and standardized.</p>
</div>

<div class="content-card">
 <h2>Frequently Asked <em>Questions</em></h2>

 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>How do I generate an APA citation from a DOI?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">Paste the DOI (e.g., 10.1037/amp0000255) into the input field, select "APA 7" as the style, and click Generate. The tool fetches metadata from Crossref and formats a complete APA 7th Edition reference automatically, including in-text citation formats.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>Is this citation generator accurate?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">Yes. All formatting rules are implemented according to the APA 7th Edition Publication Manual, MLA Handbook 9th Edition, Chicago Manual of Style 17th Edition, and standard Harvard conventions. The tool handles edge cases including 21+ authors, organization authors, missing fields, and article numbers. The confidence indicator warns you when metadata is incomplete.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>What if the DOI is not found?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">If Crossref doesn't have metadata for your DOI (rare for published articles), use the Manual Entry tab to input the citation fields yourself. The tool formats them correctly in your chosen style. You can also check if the DOI is valid at doi.org.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>Can I generate multiple citations at once?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">Yes! Use the Batch Mode tab to paste up to 20 DOIs (one per line). The tool fetches and formats all of them simultaneously, and you can copy the entire reference list or export all as a combined .bib file.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>Is this tool free? Does it store my data?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">100% free with no signup, no premium tier, and no usage limits. The only external request is to the Crossref API (a free, open academic metadata service) to fetch article information. All formatting happens in your browser. No data is stored on our servers, no cookies are set, and no analytics tracking is used.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>How is this different from Citation Machine, EasyBib, or MyBib?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">Unlike most competitors, this tool: (1) shows a citation anatomy breakdown so you understand the formatting rules; (2) includes a confidence indicator for metadata quality; (3) is completely free with no ads, paywalls, or account requirements; (4) runs 100% in your browser with no data collection; and (5) provides both reference list and in-text citation formats simultaneously.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>Does this generate in-text citations too?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">Yes. Both parenthetical and narrative in-text citation formats are generated automatically. For APA, you get both (Smith &amp; Jones, 2024) and Smith and Jones (2024). For MLA, you get (Smith and Jones 123) format.</div>
 </div>
 <div class="faq-item">
  <div class="faq-q" onclick="toggleFaq(this)"><span>What about books, websites, and other source types?</span><span class="faq-arrow">‚ñº</span></div>
  <div class="faq-a">This tool currently specializes in journal articles ‚Äî the most commonly cited source type in academic research. Book chapters and other source types with DOIs will often work via DOI lookup. Support for additional source types (books, websites, conference papers) is planned for future updates.</div>
 </div>
</div>

<div class="content-card">
 <h2>Related <em>Tools</em> for Researchers</h2>
 <p>Explore more free research tools on ResearchToolsLab:</p>
 <div class="related-grid">
  <a href="/sample-size-calculator.html" class="related-item">
   <span class="related-icon">üìä</span>
   <div class="related-info"><h4>Sample Size Calculator</h4><p>G*Power verified. 5 study types. Thesis-ready methodology output.</p></div>
  </a>
  <a href="/percent.html" class="related-item">
   <span class="related-icon">üî¢</span>
   <div class="related-info"><h4>Percentage Calculator</h4><p>Increase, decrease, difference with step-by-step solutions.</p></div>
  </a>
  <a href="/pdf.html" class="related-item">
   <span class="related-icon">üßæ</span>
   <div class="related-info"><h4>PDF Invoice Generator</h4><p>Create professional invoices and download as PDF instantly.</p></div>
  </a>
  <a href="/emi.html" class="related-item">
   <span class="related-icon">üí∞</span>
   <div class="related-info"><h4>EMI / Loan Calculator</h4><p>Calculate monthly payments for loans with amortization schedule.</p></div>
  </a>
 </div>
</div>

</section>
</div>
</main>

<footer class="site-footer" role="contentinfo">
<div class="sf-inner">
 <div class="sf-brand">Research<em>Tools</em>Lab</div>
 <p class="sf-copy">¬© 2025 ResearchToolsLab ¬∑ Privacy-friendly ¬∑ Client-side only ¬∑ Free forever</p>
 <nav class="sf-links" aria-label="Footer links"><a href="/">All Tools</a><a href="privacy.html">Privacy</a><a href="about.html">About</a></nav>
</div>
</footer>

<div id="mob-drawer" style="display:none;position:fixed;top:62px;left:0;right:0;bottom:0;background:rgba(245,240,232,.98);backdrop-filter:blur(20px);z-index:199;padding:2rem;flex-direction:column;gap:.5rem" role="dialog" aria-label="Mobile navigation">
 <a href="/" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üè† Home ‚Äî All Tools</a>
 <a href="/citation-generator.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üìñ Citation Generator</a>
 <a href="/sample-size-calculator.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üìä Sample Size Calculator</a>
 <a href="/percent.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üî¢ Percentage Calculator</a>
 <a href="/pdf.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üßæ PDF Invoice Generator</a>
</div>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CITATION GENERATOR ENGINE
   
   Features:
   - Crossref API integration (free, open, no key)
   - APA 7, MLA 9, Chicago Author-Date, Harvard
   - Robust normalization layer for Crossref data
   - 1‚Äì21+ author handling per style rules
   - Citation anatomy display
   - Confidence scoring
   - In-text citations (parenthetical + narrative)
   - BibTeX generation & export
   - Batch mode (up to 20 DOIs)
   - Manual entry fallback
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

var currentStyle = 'apa';
var lastMetadata = null;

/* ‚îÄ‚îÄ Tab Switching ‚îÄ‚îÄ */
function switchInputTab(tab) {
  document.querySelectorAll('.input-tab').forEach(function(t){t.classList.remove('active')});
  document.querySelectorAll('.tab-panel').forEach(function(p){p.classList.remove('active')});
  document.querySelector('[data-tab="'+tab+'"]').classList.add('active');
  document.getElementById('tab-'+tab).classList.add('active');
}

function switchStyle(style) {
  currentStyle = style;
  document.querySelectorAll('.style-tab').forEach(function(t){t.classList.remove('active')});
  document.querySelector('[data-style="'+style+'"]').classList.add('active');
  if (lastMetadata) renderCitation(lastMetadata);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DOI CLEANING & VALIDATION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function cleanDOI(input) {
  var s = input.trim();
  s = s.replace(/^https?:\/\/(dx\.)?doi\.org\//i, '');
  s = s.replace(/^doi:\s*/i, '');
  s = s.replace(/[\s]+/g, '');
  if (s.match(/^10\.\d{4,}/)) return s;
  return null;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CROSSREF FETCH
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
async function fetchCrossref(doi) {
  var url = 'https://api.crossref.org/works/' + encodeURIComponent(doi);
  var resp = await fetch(url, {
    headers: {'Accept':'application/json','User-Agent':'ResearchToolsLab/1.0 (https://researchtoolslab.com; mailto:contact@researchtoolslab.com)'}
  });
  if (!resp.ok) throw new Error('DOI not found in Crossref (HTTP '+resp.status+'). Check the DOI or use Manual Entry.');
  var data = await resp.json();
  return data.message;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CROSSREF ‚Üí NORMALIZED METADATA
   This is the critical normalization layer
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function normalize(cr) {
  var m = {};

  /* Authors */
  m.authors = [];
  if (cr.author && cr.author.length) {
    cr.author.forEach(function(a) {
      if (a.family) {
        m.authors.push({
          family: a.family.trim(),
          given: (a.given || '').trim()
        });
      } else if (a.name) {
        /* Organization author */
        m.authors.push({ family: a.name.trim(), given: '', org: true });
      }
    });
  }

  /* Title ‚Äî Crossref returns array */
  m.title = '';
  if (cr.title) {
    m.title = Array.isArray(cr.title) ? cr.title[0] : cr.title;
    m.title = m.title.replace(/<[^>]*>/g, '').trim();
  }

  /* Journal ‚Äî container-title is array */
  m.journal = '';
  if (cr['container-title']) {
    var ct = cr['container-title'];
    m.journal = Array.isArray(ct) ? (ct[0] || '') : ct;
    m.journal = m.journal.trim();
  }

  /* Year */
  m.year = '';
  if (cr.issued && cr.issued['date-parts'] && cr.issued['date-parts'][0]) {
    m.year = String(cr.issued['date-parts'][0][0] || '');
  } else if (cr['published-print'] && cr['published-print']['date-parts'] && cr['published-print']['date-parts'][0]) {
    m.year = String(cr['published-print']['date-parts'][0][0] || '');
  } else if (cr['published-online'] && cr['published-online']['date-parts'] && cr['published-online']['date-parts'][0]) {
    m.year = String(cr['published-online']['date-parts'][0][0] || '');
  }

  /* Volume, Issue, Pages */
  m.volume = (cr.volume || '').trim();
  m.issue = (cr.issue || '').trim();
  m.pages = (cr.page || '').replace(/-/g, '‚Äì').trim(); /* Standardize to en-dash */

  /* Article number (some journals use this instead of pages) */
  m.articleNumber = (cr['article-number'] || '').trim();
  if (!m.pages && m.articleNumber) {
    m.pages = 'Article ' + m.articleNumber;
  }

  /* DOI */
  m.doi = (cr.DOI || '').trim();

  /* Publisher */
  m.publisher = (cr.publisher || '').trim();

  /* Type */
  m.type = cr.type || 'journal-article';

  return m;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CONFIDENCE SCORING
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function confidence(m) {
  var fields = [];
  var missing = [];

  if (m.authors.length > 0) fields.push('authors'); else missing.push('authors');
  if (m.year) fields.push('year'); else missing.push('year');
  if (m.title) fields.push('title'); else missing.push('title');
  if (m.journal) fields.push('journal'); else missing.push('journal');
  if (m.volume) fields.push('volume'); else missing.push('volume');
  if (m.pages) fields.push('pages'); else missing.push('pages');
  if (m.doi) fields.push('doi'); else missing.push('doi');

  var score = fields.length;
  var level, icon, text;

  if (score >= 6) {
    level = 'high'; icon = '‚úÖ';
    text = 'High confidence ‚Äî ' + (score === 7 ? 'all fields found' : 'all essential fields found' + (missing.length ? '; optional missing: ' + missing.join(', ') : ''));
  } else if (score >= 4) {
    level = 'medium'; icon = '‚ö†Ô∏è';
    text = 'Medium confidence ‚Äî missing: ' + missing.join(', ') + '. Article may be ahead-of-print. Please verify.';
  } else {
    level = 'low'; icon = '‚ùå';
    text = 'Low confidence ‚Äî missing: ' + missing.join(', ') + '. Manual verification strongly recommended.';
  }

  return { level: level, icon: icon, text: text, missing: missing, found: fields };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   AUTHOR FORMATTING HELPERS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function initials(given) {
  if (!given) return '';
  return given.split(/[\s-]+/).map(function(part) {
    if (part.length === 0) return '';
    if (part.length <= 2 && part === part.toUpperCase()) return part + '.';
    return part.charAt(0).toUpperCase() + '.';
  }).join(' ');
}

function titleCase(str) {
  var small = ['a','an','the','and','but','or','for','nor','on','at','to','by','in','of','up','as','is','it','if','so','no','not','into','onto','with','from','than','that','this','when','then'];
  return str.replace(/\w\S*/g, function(word, idx) {
    if (idx > 0 && small.indexOf(word.toLowerCase()) >= 0) return word.toLowerCase();
    return word.charAt(0).toUpperCase() + word.substr(1).toLowerCase();
  });
}

function sentenceCase(str) {
  if (!str) return '';
  var result = str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
  /* Preserve acronyms and proper nouns after colons */
  result = result.replace(/:\s*([a-z])/g, function(m, c) { return ': ' + c.toUpperCase(); });
  return result;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   APA 7 FORMATTER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function formatAPA(m) {
  var parts = {};

  /* Authors */
  var auths = m.authors;
  var authorStr = '';
  if (auths.length === 0) {
    authorStr = m.title ? sentenceCase(m.title) : 'Unknown';
    parts.author = authorStr;
  } else if (auths.length === 1) {
    authorStr = auths[0].family + ', ' + initials(auths[0].given);
    parts.author = authorStr;
  } else if (auths.length <= 20) {
    var aList = auths.map(function(a) { return a.family + ', ' + initials(a.given); });
    authorStr = aList.slice(0, -1).join(', ') + ', & ' + aList[aList.length - 1];
    parts.author = authorStr;
  } else {
    /* 21+ authors: first 19, ..., last */
    var first19 = auths.slice(0, 19).map(function(a) { return a.family + ', ' + initials(a.given); });
    authorStr = first19.join(', ') + ', . . . ' + auths[auths.length-1].family + ', ' + initials(auths[auths.length-1].given);
    parts.author = authorStr;
  }

  /* Year */
  parts.year = m.year ? '(' + m.year + ')' : '(n.d.)';

  /* Title ‚Äî sentence case */
  parts.title = m.title ? sentenceCase(m.title) : 'Untitled';

  /* Journal ‚Äî italic, title case preserved from source */
  parts.journal = m.journal || '';

  /* Volume(Issue) */
  var volIss = '';
  if (m.volume) {
    volIss = m.volume;
    if (m.issue) volIss += '(' + m.issue + ')';
  }
  parts.volIss = volIss;

  /* Pages */
  parts.pages = m.pages || '';

  /* DOI */
  parts.doi = m.doi ? 'https://doi.org/' + m.doi : '';

  /* Full citation */
  var cite = parts.author + ' ' + parts.year + '. ' + parts.title + '. ';
  if (parts.journal) cite += parts.journal + ', ' ; // journal is italic (handled in display)
  if (parts.volIss) cite += parts.volIss;
  if (parts.pages) cite += ', ' + parts.pages;
  cite += '.';
  if (parts.doi) cite += ' ' + parts.doi;

  /* In-text */
  var intext = {};
  if (auths.length === 0) {
    var shortTitle = '"' + (parts.title.length > 40 ? parts.title.substring(0, 40) + '‚Ä¶' : parts.title) + '"';
    intext.paren = '(' + shortTitle + ', ' + (m.year || 'n.d.') + ')';
    intext.narr = shortTitle + ' (' + (m.year || 'n.d.') + ')';
  } else if (auths.length === 1) {
    intext.paren = '(' + auths[0].family + ', ' + (m.year || 'n.d.') + ')';
    intext.narr = auths[0].family + ' (' + (m.year || 'n.d.') + ')';
  } else if (auths.length === 2) {
    intext.paren = '(' + auths[0].family + ' & ' + auths[1].family + ', ' + (m.year || 'n.d.') + ')';
    intext.narr = auths[0].family + ' and ' + auths[1].family + ' (' + (m.year || 'n.d.') + ')';
  } else {
    intext.paren = '(' + auths[0].family + ' et al., ' + (m.year || 'n.d.') + ')';
    intext.narr = auths[0].family + ' et al. (' + (m.year || 'n.d.') + ')';
  }

  return { cite: cite, parts: parts, intext: intext, style: 'APA 7' };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MLA 9 FORMATTER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function formatMLA(m) {
  var parts = {};
  var auths = m.authors;

  /* Authors ‚Äî full names */
  if (auths.length === 0) {
    parts.author = '';
  } else if (auths.length === 1) {
    parts.author = auths[0].family + ', ' + auths[0].given;
  } else if (auths.length === 2) {
    parts.author = auths[0].family + ', ' + auths[0].given + ', and ' + auths[1].given + ' ' + auths[1].family;
  } else {
    parts.author = auths[0].family + ', ' + auths[0].given + ', et al.';
  }

  /* Title ‚Äî Title Case in quotes */
  parts.title = m.title ? '"' + titleCase(m.title) + '."' : '"Untitled."';

  /* Journal ‚Äî italic */
  parts.journal = m.journal || '';

  /* Vol, No, Year, Pages */
  parts.volIss = '';
  if (m.volume) parts.volIss += 'vol. ' + m.volume;
  if (m.issue) parts.volIss += ', no. ' + m.issue;

  parts.year = m.year || '';
  parts.pages = m.pages ? 'pp. ' + m.pages : '';
  parts.doi = m.doi ? 'https://doi.org/' + m.doi : '';

  /* Full citation */
  var cite = '';
  if (parts.author) cite += parts.author + '. ';
  cite += parts.title + ' ';
  if (parts.journal) cite += parts.journal + ', ';
  if (parts.volIss) cite += parts.volIss + ', ';
  if (parts.year) cite += parts.year + ', ';
  if (parts.pages) cite += parts.pages + '. ';
  if (parts.doi) cite += parts.doi + '.';

  /* In-text */
  var intext = {};
  if (auths.length === 0) {
    var shortTitle = '"' + titleCase(m.title || 'Untitled').substring(0, 30) + '"';
    intext.paren = '(' + shortTitle + ')';
    intext.narr = shortTitle;
  } else if (auths.length <= 2) {
    var names = auths.map(function(a){return a.family}).join(' and ');
    intext.paren = '(' + names + (m.pages ? ' ' + m.pages.replace('pp. ','') : '') + ')';
    intext.narr = names;
  } else {
    intext.paren = '(' + auths[0].family + ' et al.' + (m.pages ? ' ' + m.pages.replace('pp. ','') : '') + ')';
    intext.narr = auths[0].family + ' et al.';
  }

  return { cite: cite, parts: parts, intext: intext, style: 'MLA 9' };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CHICAGO AUTHOR-DATE FORMATTER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function formatChicago(m) {
  var parts = {};
  var auths = m.authors;

  /* Authors ‚Äî full names, first author inverted */
  if (auths.length === 0) {
    parts.author = '';
  } else if (auths.length === 1) {
    parts.author = auths[0].family + ', ' + auths[0].given;
  } else if (auths.length <= 10) {
    var list = [auths[0].family + ', ' + auths[0].given];
    for (var i = 1; i < auths.length - 1; i++) list.push(auths[i].given + ' ' + auths[i].family);
    list.push('and ' + auths[auths.length-1].given + ' ' + auths[auths.length-1].family);
    parts.author = list.join(', ');
  } else {
    parts.author = auths[0].family + ', ' + auths[0].given + ', et al.';
  }

  parts.year = m.year || 'n.d.';
  parts.title = m.title ? '"' + sentenceCase(m.title) + '."' : '"Untitled."';
  parts.journal = m.journal || '';

  var volIss = '';
  if (m.volume) {
    volIss = m.volume;
    if (m.issue) volIss += ' (' + m.issue + ')';
  }
  parts.volIss = volIss;
  parts.pages = m.pages || '';
  parts.doi = m.doi ? 'https://doi.org/' + m.doi : '';

  var cite = '';
  if (parts.author) cite += parts.author + '. ';
  cite += parts.year + '. ';
  cite += parts.title + ' ';
  if (parts.journal) cite += parts.journal + ' ';
  if (parts.volIss) cite += parts.volIss;
  if (parts.pages) cite += ': ' + parts.pages;
  cite += '.';
  if (parts.doi) cite += ' ' + parts.doi + '.';

  /* In-text */
  var intext = {};
  if (auths.length === 0) {
    intext.paren = '("' + sentenceCase(m.title||'').substring(0,30) + '‚Ä¶" ' + (m.year||'n.d.') + ')';
    intext.narr = intext.paren;
  } else if (auths.length <= 3) {
    var names = auths.map(function(a){return a.family});
    var joined = names.length <= 2 ? names.join(' and ') : names.slice(0,-1).join(', ') + ', and ' + names[names.length-1];
    intext.paren = '(' + joined + ' ' + (m.year||'n.d.') + ')';
    intext.narr = joined + ' (' + (m.year||'n.d.') + ')';
  } else {
    intext.paren = '(' + auths[0].family + ' et al. ' + (m.year||'n.d.') + ')';
    intext.narr = auths[0].family + ' et al. (' + (m.year||'n.d.') + ')';
  }

  return { cite: cite, parts: parts, intext: intext, style: 'Chicago Author-Date' };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   HARVARD FORMATTER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function formatHarvard(m) {
  var parts = {};
  var auths = m.authors;

  /* Authors ‚Äî Last, F.M. (no space between initials) */
  function harvardInitials(given) {
    if (!given) return '';
    return given.split(/[\s-]+/).map(function(p){
      if (p.length===0) return '';
      return p.charAt(0).toUpperCase() + '.';
    }).join('');
  }

  if (auths.length === 0) {
    parts.author = '';
  } else if (auths.length === 1) {
    parts.author = auths[0].family + ', ' + harvardInitials(auths[0].given);
  } else if (auths.length <= 3) {
    var list = auths.map(function(a){ return a.family + ', ' + harvardInitials(a.given); });
    parts.author = list.slice(0,-1).join(', ') + ' and ' + list[list.length-1];
  } else {
    parts.author = auths[0].family + ', ' + harvardInitials(auths[0].given) + ' et al.';
  }

  parts.year = m.year ? '(' + m.year + ')' : '(n.d.)';
  parts.title = m.title ? "'" + sentenceCase(m.title) + "'" : "'Untitled'";
  parts.journal = m.journal || '';

  var volIss = '';
  if (m.volume) {
    volIss = m.volume;
    if (m.issue) volIss += '(' + m.issue + ')';
  }
  parts.volIss = volIss;
  parts.pages = m.pages ? 'pp. ' + m.pages : '';
  parts.doi = m.doi ? 'doi:' + m.doi : '';

  var cite = '';
  if (parts.author) cite += parts.author + ' ';
  cite += parts.year + ' ';
  cite += parts.title + ', ';
  if (parts.journal) cite += parts.journal + ', ';
  if (parts.volIss) cite += parts.volIss;
  if (parts.pages) cite += ', ' + parts.pages;
  cite += '.';
  if (parts.doi) cite += ' ' + parts.doi + '.';

  /* In-text */
  var intext = {};
  if (auths.length === 0) {
    intext.paren = '(' + sentenceCase(m.title||'').substring(0,30) + ', ' + (m.year||'n.d.') + ')';
    intext.narr = intext.paren;
  } else if (auths.length <= 2) {
    var names = auths.map(function(a){return a.family}).join(' and ');
    intext.paren = '(' + names + ', ' + (m.year||'n.d.') + ')';
    intext.narr = names + ' (' + (m.year||'n.d.') + ')';
  } else {
    intext.paren = '(' + auths[0].family + ' et al., ' + (m.year||'n.d.') + ')';
    intext.narr = auths[0].family + ' et al. (' + (m.year||'n.d.') + ')';
  }

  return { cite: cite, parts: parts, intext: intext, style: 'Harvard' };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BIBTEX GENERATOR
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function generateBibTeX(m) {
  var key = (m.authors.length ? m.authors[0].family.toLowerCase().replace(/[^a-z]/g,'') : 'unknown') + (m.year || 'nd');
  var authBib = m.authors.map(function(a){ return a.family + ', ' + a.given; }).join(' and ');
  var type = m.type === 'book' ? '@book' : m.type === 'book-chapter' ? '@incollection' : '@article';

  var bib = type + '{' + key + ',\n';
  bib += '  title     = {' + m.title + '},\n';
  bib += '  author    = {' + authBib + '},\n';
  if (m.journal) bib += '  journal   = {' + m.journal + '},\n';
  if (m.year) bib += '  year      = {' + m.year + '},\n';
  if (m.volume) bib += '  volume    = {' + m.volume + '},\n';
  if (m.issue) bib += '  number    = {' + m.issue + '},\n';
  if (m.pages && !m.pages.startsWith('Article')) bib += '  pages     = {' + m.pages + '},\n';
  if (m.publisher) bib += '  publisher = {' + m.publisher + '},\n';
  if (m.doi) bib += '  doi       = {' + m.doi + '},\n';
  bib += '}';

  return { text: bib, key: key };
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FORMAT DISPATCHER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function formatCitation(m, style) {
  switch(style) {
    case 'apa': return formatAPA(m);
    case 'mla': return formatMLA(m);
    case 'chicago': return formatChicago(m);
    case 'harvard': return formatHarvard(m);
    default: return formatAPA(m);
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CITATION ANATOMY BUILDER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildAnatomy(m, result) {
  var p = result.parts;
  var html = '<div class="anatomy"><div class="anatomy-title">üìê Citation Anatomy ‚Äî ' + result.style + '</div><div class="anatomy-cite">';

  if (p.author) html += '<span class="a-seg a-author" data-label="Authors">' + esc(p.author) + '</span> ';
  if (p.year) html += '<span class="a-seg a-year" data-label="Year">' + esc(p.year) + '</span> ';
  if (p.title) html += '<span class="a-seg a-title" data-label="Title">' + esc(p.title.replace(/^["']|[."']$/g,'')) + '</span> ';
  if (p.journal) html += '<span class="a-seg a-journal" data-label="Journal"><em>' + esc(p.journal) + '</em></span> ';
  if (p.volIss) html += '<span class="a-seg a-vol" data-label="Vol(Issue)">' + esc(p.volIss) + '</span> ';
  if (p.pages) html += '<span class="a-seg a-pages" data-label="Pages">' + esc(p.pages) + '</span> ';
  if (p.doi) html += '<span class="a-seg a-doi" data-label="DOI">' + esc(p.doi) + '</span>';

  html += '</div></div>';
  return html;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   RENDER FULL RESULT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderCitation(m) {
  lastMetadata = m;
  var result = formatCitation(m, currentStyle);
  var conf = confidence(m);
  var bib = generateBibTeX(m);

  var html = '';

  /* Confidence */
  html += '<div class="confidence ' + conf.level + '"><span class="confidence-icon">' + conf.icon + '</span> ' + conf.text + '</div>';

  /* Main citation */
  html += '<div class="cite-box"><span class="cite-label">' + result.style + ' Reference</span>';
  html += formatCiteHTML(result.cite, m);
  html += '</div>';

  /* In-text citations */
  html += '<div class="intext-box">';
  html += '<div class="intext-label">In-Text Citations</div>';
  html += '<strong>Parenthetical:</strong> ' + esc(result.intext.paren) + '<br>';
  html += '<strong>Narrative:</strong> ' + esc(result.intext.narr);
  html += '</div>';

  /* Anatomy */
  html += buildAnatomy(m, result);

  /* Buttons */
  html += '<div class="btn-row">';
  html += '<button class="btn-copy" onclick="copyCite()" id="btnCopyCite">üìã Copy Citation</button>';
  html += '<button class="btn-copy" onclick="copyIntext(\'paren\')" style="background:var(--blue)">üìã Copy In-Text</button>';
  html += '<button class="btn-secondary" onclick="toggleBibtex()">{ } Show BibTeX</button>';
  html += '<button class="btn-secondary" onclick="downloadBib()">‚¨á Download .bib</button>';
  html += '</div>';

  /* BibTeX */
  html += '<div class="bibtex-box" id="bibtexBox"><button class="bibtex-copy" onclick="copyBibtex()">Copy</button>' + esc(bib.text) + '</div>';

  document.getElementById('result').innerHTML = html;
  document.getElementById('result').classList.add('show');

  /* Store for copy functions */
  window._lastCite = result.cite;
  window._lastIntext = result.intext;
  window._lastBib = bib.text;
  window._lastBibKey = bib.key;
}

function formatCiteHTML(cite, m) {
  /* Add italic formatting for journal name */
  if (m.journal) {
    cite = cite.replace(m.journal, '<em>' + m.journal + '</em>');
  }
  /* Make DOI a link */
  if (m.doi) {
    var doiUrl = 'https://doi.org/' + m.doi;
    cite = cite.replace(doiUrl, '<a href="' + doiUrl + '" target="_blank" rel="noopener" style="color:var(--teal);text-decoration:underline">' + doiUrl + '</a>');
    /* Harvard doi: format */
    cite = cite.replace('doi:' + m.doi, '<a href="' + doiUrl + '" target="_blank" rel="noopener" style="color:var(--teal);text-decoration:underline">doi:' + m.doi + '</a>');
  }
  return cite;
}

function esc(s) {
  if (!s) return '';
  var d = document.createElement('div');
  d.textContent = s;
  return d.innerHTML;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GENERATE FROM DOI
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
async function generateFromDOI() {
  var raw = document.getElementById('doiInput').value;
  var doi = cleanDOI(raw);
  if (!doi) {
    showErr('Please enter a valid DOI (e.g., 10.1037/amp0000255 or https://doi.org/10.1037/amp0000255).');
    return;
  }
  var btn = document.getElementById('btnGenDoi');
  btn.disabled = true;
  btn.innerHTML = '<span class="spinner"></span>';
  document.getElementById('result').innerHTML = '<div class="loading"><span class="spinner"></span> Fetching metadata from Crossref‚Ä¶</div>';
  document.getElementById('result').classList.add('show');

  try {
    var cr = await fetchCrossref(doi);
    var m = normalize(cr);
    renderCitation(m);
  } catch(e) {
    showErr(e.message);
  } finally {
    btn.disabled = false;
    btn.innerHTML = 'Generate';
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GENERATE FROM MANUAL ENTRY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function generateFromManual() {
  var authLines = document.getElementById('manAuthors').value.trim().split('\n').filter(function(l){return l.trim()});
  var m = {
    authors: authLines.map(function(line) {
      var parts = line.split(',');
      return { family: (parts[0]||'').trim(), given: (parts.slice(1).join(',') || '').trim() };
    }),
    year: document.getElementById('manYear').value.trim(),
    title: document.getElementById('manTitle').value.trim(),
    journal: document.getElementById('manJournal').value.trim(),
    volume: document.getElementById('manVol').value.trim(),
    issue: document.getElementById('manIssue').value.trim(),
    pages: document.getElementById('manPages').value.trim().replace(/-/g,'‚Äì'),
    doi: cleanDOI(document.getElementById('manDoi').value) || '',
    publisher: '',
    articleNumber: '',
    type: 'journal-article'
  };

  if (!m.title) { showErr('Please enter at least an article title.'); return; }
  renderCitation(m);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BATCH MODE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
async function generateBatch() {
  var raw = document.getElementById('batchInput').value.trim();
  if (!raw) { showErr('Please enter at least one DOI.'); return; }
  var lines = raw.split('\n').map(function(l){return l.trim()}).filter(function(l){return l});
  if (lines.length > 20) { showErr('Maximum 20 DOIs per batch. You entered ' + lines.length + '.'); return; }

  var btn = document.getElementById('btnBatch');
  btn.disabled = true;
  btn.innerHTML = '<span class="spinner"></span> Processing‚Ä¶';

  var results = [];
  var html = '<div class="batch-results">';
  var allBib = '';

  for (var i = 0; i < lines.length; i++) {
    var doi = cleanDOI(lines[i]);
    if (!doi) {
      html += '<div class="batch-item"><div class="batch-doi">' + esc(lines[i]) + '</div><div class="batch-err">‚ùå Invalid DOI format</div></div>';
      continue;
    }
    try {
      var cr = await fetchCrossref(doi);
      var m = normalize(cr);
      var result = formatCitation(m, currentStyle);
      var bib = generateBibTeX(m);
      html += '<div class="batch-item"><div class="batch-doi">DOI: ' + esc(doi) + '</div><div class="batch-cite">' + formatCiteHTML(result.cite, m) + '</div></div>';
      results.push(result.cite);
      allBib += bib.text + '\n\n';
    } catch(e) {
      html += '<div class="batch-item"><div class="batch-doi">DOI: ' + esc(doi) + '</div><div class="batch-err">‚ùå ' + esc(e.message) + '</div></div>';
    }
  }

  html += '</div>';

  if (results.length > 0) {
    html += '<div class="btn-row" style="margin-top:1rem">';
    html += '<button class="btn-copy" onclick="copyText(window._batchCites)">üìã Copy All Citations</button>';
    html += '<button class="btn-secondary" onclick="downloadBibBatch()">‚¨á Download All (.bib)</button>';
    html += '</div>';
  }

  window._batchCites = results.join('\n\n');
  window._batchBib = allBib;

  document.getElementById('result').innerHTML = html;
  document.getElementById('result').classList.add('show');
  btn.disabled = false;
  btn.innerHTML = 'Generate All Citations';
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   COPY / DOWNLOAD HELPERS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function copyText(text) {
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(text).then(flashCopied);
  } else {
    var ta = document.createElement('textarea');
    ta.value = text; ta.style.cssText = 'position:fixed;opacity:0';
    document.body.appendChild(ta); ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    flashCopied();
  }
}

function copyCite() {
  /* Strip HTML for plain text copy */
  var tmp = document.createElement('div');
  tmp.innerHTML = window._lastCite || '';
  copyText(tmp.textContent || tmp.innerText || window._lastCite);
}

function copyIntext(type) {
  if (window._lastIntext) copyText(window._lastIntext[type]);
}

function copyBibtex() {
  copyText(window._lastBib || '');
}

function toggleBibtex() {
  var box = document.getElementById('bibtexBox');
  box.classList.toggle('show');
}

function downloadBib() {
  downloadFile((window._lastBibKey || 'citation') + '.bib', window._lastBib || '');
}

function downloadBibBatch() {
  downloadFile('references.bib', window._batchBib || '');
}

function downloadFile(name, content) {
  var blob = new Blob([content], {type:'text/plain'});
  var a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(a.href);
}

function flashCopied() {
  var btns = document.querySelectorAll('.btn-copy');
  /* Flash the first visible copy button */
  if (btns.length) {
    var b = btns[0];
    var orig = b.innerHTML;
    b.innerHTML = '‚úì Copied!';
    b.style.background = 'var(--success)';
    setTimeout(function(){ b.innerHTML = orig; b.style.background = ''; }, 2000);
  }
}

/* ‚îÄ‚îÄ Error display ‚îÄ‚îÄ */
function showErr(msg) {
  document.getElementById('result').innerHTML = '<div class="err-box">‚ö†Ô∏è ' + msg + '</div>';
  document.getElementById('result').classList.add('show');
}

/* ‚îÄ‚îÄ FAQ ‚îÄ‚îÄ */
function toggleFaq(el) {
  var item = el.closest('.faq-item');
  var wasOpen = item.classList.contains('open');
  document.querySelectorAll('.faq-item').forEach(function(i){i.classList.remove('open')});
  if (!wasOpen) item.classList.add('open');
}

/* ‚îÄ‚îÄ Mobile nav ‚îÄ‚îÄ */
var _navOpen = false;
function navToggle() {
  _navOpen = !_navOpen;
  var d = document.getElementById('mob-drawer');
  var sp = document.querySelectorAll('.hamburger span');
  d.style.display = _navOpen ? 'flex' : 'none';
  if (_navOpen) {
    sp[0].style.transform='rotate(45deg) translate(5px,5px)';
    sp[1].style.opacity='0';
    sp[2].style.transform='rotate(-45deg) translate(5px,-5px)';
  } else {
    sp.forEach(function(s){s.style.transform='';s.style.opacity=''});
  }
}
function navClose() {
  _navOpen = false;
  document.getElementById('mob-drawer').style.display = 'none';
  document.querySelectorAll('.hamburger span').forEach(function(s){s.style.transform='';s.style.opacity=''});
}

/* ‚îÄ‚îÄ Allow Enter key on DOI input ‚îÄ‚îÄ */
document.addEventListener('DOMContentLoaded', function() {
  var doiInput = document.getElementById('doiInput');
  if (doiInput) {
    doiInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') { e.preventDefault(); generateFromDOI(); }
    });
  }
});
</script>
</body>
</html>