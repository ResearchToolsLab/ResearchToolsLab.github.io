<!-- SEO & instructions improved, logo size guidance added, date/logo overlap fixed -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free PDF Invoice Generator – Online Invoice Maker</title>
<meta name="description" content="Create professional PDF invoices online instantly. Upload your business logo, add client info, items, taxes, currency, and download free invoices.">
<meta name="keywords" content="pdf invoice generator, online invoice maker, free invoice creator, business invoice PDF, client invoice template">
<meta name="robots" content="index, follow">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --primary:#2563eb;
  --bg:#f3f5f9;
  --card:#ffffff;
}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  margin:0;
  padding:20px;
}
.container{
  max-width:900px;
  margin:auto;
  background:var(--card);
  padding:30px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
h1{text-align:center;margin-bottom:10px;}
p.desc{text-align:center;color:#555;margin-bottom:20px;}
input, select, textarea, button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:1rem;
}
button{
  background:var(--primary);
  color:#fff;
  border:none;
  cursor:pointer;
}
button:hover{opacity:.9}
label{font-weight:bold;margin-top:10px;display:block;}
.result{
  background:#f9fafb;
  padding:20px;
  border-radius:12px;
  margin-top:20px;
}
#logoPreview{
  max-width:150px;    /* limit width */
  max-height:80px;    /* limit height */
  object-fit:contain; /* maintain aspect ratio */
  margin-top:6px;
}
.status{font-size:.9rem;margin-top:5px;color:#444;}
.status.error{color:red;}
.status.success{color:green;}
footer{text-align:center;margin-top:30px;font-size:.85rem;color:#666;}
</style>
</head>

<body>
<div class="container">
<h1>Professional PDF Invoice Generator</h1>
<p class="desc">Upload your business logo (max 150x80px), add client info, items, taxes, currency, notes, and download instantly</p>

<label>Your Business Name</label>
<input type="text" id="business" placeholder="Your Business Name">

<label>Client Name</label>
<input type="text" id="client" placeholder="Client Name">

<label>Invoice Number</label>
<input type="text" id="invoiceNo" value="1001">

<label>Invoice Date</label>
<input type="date" id="date">

<label>Currency</label>
<select id="currency">
  <option value="$">USD ($)</option>
  <option value="€">EUR (€)</option>
  <option value="₹">INR (₹)</option>
  <option value="£">GBP (£)</option>
</select>

<label>Tax % (GST/VAT)</label>
<input type="number" id="tax" placeholder="Tax %" step="0.01">

<h3>Invoice Items</h3>
<table id="items" style="width:100%;border-collapse:collapse;margin-bottom:10px;">
<thead>
<tr>
<th>Description</th><th>Qty</th><th>Price</th><th>Total</th>
</tr>
</thead>
<tbody></tbody>
</table>
<button onclick="addItem()">+ Add Item</button>

<label>Notes / Terms</label>
<textarea id="notes" rows="3"></textarea>

<label>Upload Logo (optional, max 150x80px)</label>
<input type="file" id="logo">
<img id="logoPreview" alt="Logo Preview">
<div id="logoStatus" class="status"></div>

<button onclick="generateInvoice()">Generate PDF</button>

<div id="preview" class="result"></div>

<footer>FreeToolHub • Privacy-friendly • Client-side only</footer>
</div>

<script>
const itemsBody = document.querySelector("#items tbody");
const logoInput = document.getElementById("logo");
const logoPreview = document.getElementById("logoPreview");
const logoStatus = document.getElementById("logoStatus");
let logoData = null;

document.getElementById("invoiceNo").value = localStorage.getItem("invoiceNo") || "1001";

addItem(); // initial row

logoInput.addEventListener("change", e=>{
  const file = e.target.files[0];
  if(!file) return;

  if(!["image/png","image/jpeg"].includes(file.type)){
    logoStatus.textContent = "Unsupported format! Only PNG or JPEG allowed.";
    logoStatus.className="status error";
    logoData = null;
    logoPreview.src="";
    return;
  }

  if(file.size > 500*1024){
    logoStatus.textContent = "File too large! Max 500KB recommended.";
    logoStatus.className="status error";
    logoData = null;
    logoPreview.src="";
    return;
  }

  logoStatus.textContent = "Uploading...";
  logoStatus.className="status";

  const reader = new FileReader();
  reader.onload = ()=> {
    logoData = reader.result;
    logoPreview.src = logoData;
    logoStatus.textContent = "Logo loaded successfully!";
    logoStatus.className="status success";
  }
  reader.readAsDataURL(file);
});

function addItem(){
  const row = document.createElement("tr");
  row.innerHTML = `
  <td contenteditable>Description</td>
  <td contenteditable>1</td>
  <td contenteditable>0.00</td>
  <td>0.00</td>`;
  itemsBody.appendChild(row);
}

function generateInvoice(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const business = document.getElementById("business").value || "Business";
  const client = document.getElementById("client").value || "Client";
  const invoiceNo = document.getElementById("invoiceNo").value;
  const date = document.getElementById("date").value || new Date().toISOString().slice(0,10);
  const currency = document.getElementById("currency").value;
  const taxRate = parseFloat(document.getElementById("tax").value) || 0;
  const notes = document.getElementById("notes").value;

  let y = 20;

  // Add logo if loaded
  if(logoData){
    try{
      doc.addImage(logoData,"PNG",20,10,50,25); // smaller logo, positioned top-left
    }catch(e){
      logoStatus.textContent = "Failed to embed logo, proceeding without logo.";
      logoStatus.className="status error";
    }
  }

  doc.setFontSize(18);
  doc.text("INVOICE",150,20,{align:"right"}); // move invoice title right to avoid logo
  y+=10;
  doc.setFontSize(11);
  doc.text(`Invoice #: ${invoiceNo}`,150,30,{align:"right"});
  doc.text(`Date: ${date}`,150,36,{align:"right"});
  y+=16;
  doc.text(`From: ${business}`,20,y);
  y+=8;
  doc.text(`Bill To: ${client}`,20,y);
  y+=12;

  // Table headers
  doc.text("Description",20,y);
  doc.text("Qty",110,y);
  doc.text("Price",130,y);
  doc.text("Total",160,y);
  y+=6;

  let subtotal = 0;
  [...itemsBody.children].forEach(r=>{
    const desc = r.cells[0].innerText;
    const qty = parseFloat(r.cells[1].innerText) || 0;
    const price = parseFloat(r.cells[2].innerText) || 0;
    const total = qty*price;
    subtotal += total;
    doc.text(desc,20,y);
    doc.text(qty.toString(),110,y);
    doc.text(price.toFixed(2),130,y);
    doc.text(total.toFixed(2),160,y);
    y+=6;
  });

  const taxAmt = subtotal*taxRate/100;
  const total = subtotal+taxAmt;
  y+=6;
  doc.text(`Subtotal: ${currency}${subtotal.toFixed(2)}`,130,y); y+=6;
  doc.text(`Tax: ${currency}${taxAmt.toFixed(2)}`,130,y); y+=6;
  doc.text(`Total: ${currency}${total.toFixed(2)}`,130,y);

  if(notes){
    y+=10;
    doc.text("Notes:",20,y);
    y+=6;
    doc.text(notes,20,y,{maxWidth:170});
  }

  try{
    doc.save(`Invoice_${invoiceNo}.pdf`);
    document.getElementById("preview").innerHTML = `<strong>Invoice generated successfully! Total: ${currency}${total.toFixed(2)}</strong>`;
    localStorage.setItem("invoiceNo",Number(invoiceNo)+1);
  }catch(e){
    document.getElementById("preview").innerHTML = `<span style="color:red;">Failed to generate PDF. ${e}</span>`;
  }
}
</script>
</body>
</html>