<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free PDF Invoice Generator ‚Äî Online Invoice Maker | Researchtoolslab</title>
<meta name="description" content="Generate professional PDF invoices online for free. Upload your business logo, add client info, items, taxes, currency, and download instant invoices. Perfect for small businesses, freelancers, and startups.">
<meta name="keywords" content="pdf invoice generator, online invoice maker, free invoice creator, business invoice PDF, client invoice template, professional invoice, download invoice, small business invoice, freelancer invoice, GST invoice, VAT invoice">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,700;0,9..144,900;1,9..144,700&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* ============================================================
   DESIGN TOKENS ‚Äî matches Researchtoolslab index exactly
============================================================ */
:root{
  --cream:#f5f0e8;
  --cream2:#ede7d9;
  --cream3:#e4ddd0;
  --white:#ffffff;
  --ink:#1a1612;
  --ink2:#3d3530;
  --ink3:#7a6f65;
  --ink4:#b0a89e;
  --rust:#c8441a;
  --rust2:#e05228;
  --rust-l:rgba(200,68,26,.1);
  --teal:#1a7a6e;
  --teal-l:rgba(26,122,110,.1);
  --success:#0f9b6e;
  --success-l:rgba(15,155,110,.08);
  --success-b:rgba(15,155,110,.2);
  --warn:#b45a00;
  --warn-l:rgba(180,90,0,.07);
  --warn-b:rgba(180,90,0,.2);
  --err:#c8221a;
  --err-l:rgba(200,34,26,.07);
  --err-b:rgba(200,34,26,.2);
  --border:rgba(26,22,18,.1);
  --border2:rgba(26,22,18,.16);
  --shadow-sm:0 2px 12px rgba(26,22,18,.07);
  --shadow-md:0 8px 40px rgba(26,22,18,.12);
  --shadow-lg:0 24px 80px rgba(26,22,18,.18);
  --serif:'Fraunces',Georgia,serif;
  --sans:'DM Sans',sans-serif;
  --mono:'DM Mono',monospace;
  --r-sm:8px;
  --r-md:14px;
  --r-lg:20px;
  --r-xl:28px;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:var(--sans);background:var(--cream);color:var(--ink);font-size:16px;line-height:1.6;min-height:100vh}

body::after{
  content:'';
  position:fixed;
  inset:0;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
  pointer-events:none;
  z-index:9999;
  mix-blend-mode:multiply
}

a{text-decoration:none;color:inherit}

/* ‚îÄ‚îÄ NAV (identical to index) ‚îÄ‚îÄ */
.nav{position:sticky;top:0;z-index:200;background:rgba(245,240,232,.93);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}

.nav-wrap{max-width:1200px;margin:0 auto;padding:0 2rem;height:62px;display:flex;align-items:center;justify-content:space-between;gap:2rem}

.logo{display:flex;align-items:center;gap:.6rem;flex-shrink:0}

.logo-mark{width:34px;height:34px;background:var(--ink);border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-family:var(--serif);font-size:1.05rem;font-weight:900;color:var(--cream);letter-spacing:-.05em}

.logo-name{font-family:var(--serif);font-size:1.15rem;font-weight:700;color:var(--ink);letter-spacing:-.03em}

.logo-name em{color:var(--rust);font-style:normal}

.nav-links{display:flex;align-items:center;gap:.15rem;list-style:none}

.nav-links a{padding:.4rem .85rem;font-size:.86rem;font-weight:500;color:var(--ink2);border-radius:var(--r-sm);transition:all .18s}

.nav-links a:hover{background:var(--cream2);color:var(--ink)}

.nav-cta{background:var(--rust)!important;color:#fff!important;font-weight:600!important;padding:.4rem 1rem!important}

.nav-cta:hover{background:var(--rust2)!important;transform:translateY(-1px)!important;box-shadow:0 4px 16px rgba(200,68,26,.3)!important}

.hamburger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:6px;border:none;background:none}

.hamburger span{display:block;width:22px;height:2px;background:var(--ink);border-radius:2px;transition:all .2s}

/* ‚îÄ‚îÄ PAGE LAYOUT ‚îÄ‚îÄ */
.page-wrap{max-width:760px;margin:0 auto;padding:2.5rem 1.5rem 4rem}

/* ‚îÄ‚îÄ PAGE HEADER ‚îÄ‚îÄ */
.page-header{text-align:center;margin-bottom:2.25rem}

.page-breadcrumb{display:flex;align-items:center;justify-content:center;gap:.5rem;font-family:var(--mono);font-size:.68rem;color:var(--ink4);letter-spacing:.06em;text-transform:uppercase;margin-bottom:1.25rem}

.page-breadcrumb a:hover{color:var(--rust)}

.page-breadcrumb span{color:var(--ink4)}

.page-h1{font-family:var(--serif);font-size:clamp(1.7rem,4vw,2.4rem);font-weight:900;color:var(--ink);letter-spacing:-.04em;margin-bottom:.5rem;line-height:1.1}

.page-h1 em{color:var(--rust);font-style:italic}

.page-sub{font-size:.92rem;color:var(--ink3);max-width:500px;margin:0 auto;font-weight:300;line-height:1.7}

.page-badges{display:flex;align-items:center;justify-content:center;gap:.5rem;flex-wrap:wrap;margin-top:1rem}

.page-badge{display:inline-flex;align-items:center;gap:.3rem;background:var(--teal-l);border:1px solid rgba(26,122,110,.2);border-radius:20px;padding:.22rem .7rem;font-size:.68rem;color:var(--teal);font-family:var(--mono);font-weight:500}

/* ‚îÄ‚îÄ TOOL CARD ‚îÄ‚îÄ */
.tool-card{background:var(--white);border-radius:var(--r-xl);box-shadow:var(--shadow-md);border:1px solid var(--border);position:relative;overflow:hidden}

.tool-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--rust),#e07840,var(--teal))}

.tool-inner{padding:2rem}

/* ‚îÄ‚îÄ FORM ELEMENTS ‚îÄ‚îÄ */
.form-row{margin-bottom:1.2rem}

label{display:block;font-size:.84rem;font-weight:500;margin-bottom:.4rem;color:var(--ink2)}

.hint{font-weight:400;color:var(--ink4);font-size:.76rem;margin-left:.35rem}

input[type="text"],
input[type="date"],
input[type="number"],
input[type="file"],
select,
textarea{
  width:100%;
  padding:.62rem .9rem;
  border:1.5px solid var(--border2);
  border-radius:var(--r-md);
  font-family:var(--sans);
  font-size:.93rem;
  background:var(--white);
  color:var(--ink);
  transition:border-color .18s;
  -webkit-appearance:none;
  appearance:none
}

select{
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%237a6f65' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:right .9rem center;
  padding-right:2.5rem;
  cursor:pointer
}

input:focus,
select:focus,
textarea:focus{
  outline:none;
  border-color:var(--rust);
  box-shadow:0 0 0 3px rgba(200,68,26,.12)
}

textarea{
  font-family:var(--sans);
  resize:vertical;
  min-height:80px
}

/* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
.slabel{font-family:var(--mono);font-size:.68rem;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--ink4);margin-bottom:1.1rem;margin-top:1.5rem}

.items-table{
  width:100%;
  border-collapse:collapse;
  margin-bottom:1rem;
  border-radius:var(--r-md);
  overflow:hidden;
  border:1px solid var(--border)
}

.items-table thead{
  background:var(--cream2);
}

.items-table th{
  padding:.75rem .5rem;
  text-align:left;
  font-size:.8rem;
  font-weight:600;
  color:var(--ink2);
  border-bottom:1px solid var(--border)
}

.items-table td{
  padding:.65rem .5rem;
  border-bottom:1px solid var(--border);
  font-size:.88rem
}

.items-table tbody tr:last-child td{
  border-bottom:none
}

.items-table td[contenteditable]{
  cursor:text;
  min-width:60px
}

.items-table td[contenteditable]:hover{
  background:var(--cream)
}

.items-table td[contenteditable]:focus{
  outline:2px solid var(--rust);
  background:var(--white)
}

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn-add{
  width:100%;
  padding:.75rem;
  background:var(--cream2);
  color:var(--ink);
  border:1.5px dashed var(--border2);
  border-radius:var(--r-md);
  font-family:var(--sans);
  font-size:.9rem;
  font-weight:500;
  cursor:pointer;
  transition:all .18s;
  margin-bottom:1.5rem
}

.btn-add:hover{
  background:var(--cream3);
  border-color:var(--rust)
}

.btn-generate{
  width:100%;
  padding:1rem;
  background:var(--rust);
  color:#fff;
  border:none;
  border-radius:var(--r-md);
  font-family:var(--sans);
  font-size:1rem;
  font-weight:600;
  cursor:pointer;
  transition:all .2s;
  margin-top:1.5rem;
  letter-spacing:.01em
}

.btn-generate:hover{
  background:var(--rust2);
  transform:translateY(-1px);
  box-shadow:0 6px 20px rgba(200,68,26,.3)
}

.remove-btn{
  background:var(--err);
  color:#fff;
  padding:.3rem .6rem;
  border:none;
  border-radius:var(--r-sm);
  cursor:pointer;
  font-size:.75rem;
  font-weight:500;
  transition:all .18s
}

.remove-btn:hover{
  background:#a01a14;
  transform:scale(1.05)
}

/* ‚îÄ‚îÄ LOGO PREVIEW ‚îÄ‚îÄ */
#logoPreview{
  max-width:150px;
  max-height:80px;
  object-fit:contain;
  margin-top:.5rem;
  border-radius:var(--r-sm);
  display:none
}

#logoPreview.show{
  display:block
}

/* ‚îÄ‚îÄ STATUS MESSAGES ‚îÄ‚îÄ */
.status{
  font-size:.8rem;
  margin-top:.5rem;
  padding:.5rem .75rem;
  border-radius:var(--r-sm);
  display:none
}

.status.show{
  display:block
}

.status.error{
  background:var(--err-l);
  border:1px solid var(--err-b);
  color:var(--err)
}

.status.success{
  background:var(--success-l);
  border:1px solid var(--success-b);
  color:var(--success)
}

/* ‚îÄ‚îÄ RESULT BOX ‚îÄ‚îÄ */
.result-box{
  background:var(--success-l);
  border:1px solid var(--success-b);
  border-left:3px solid var(--success);
  border-radius:var(--r-md);
  padding:1.1rem;
  margin-top:1.5rem;
  display:none
}

.result-box.show{
  display:block
}

.result-box strong{
  color:var(--success);
  font-weight:600
}

/* ‚îÄ‚îÄ INFO BOX ‚îÄ‚îÄ */
.info-box{
  background:var(--teal-l);
  border:1px solid rgba(26,122,110,.2);
  border-radius:var(--r-md);
  padding:1rem;
  font-size:.88rem;
  line-height:1.65;
  color:var(--ink2);
  margin-bottom:1.5rem
}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
.site-footer{
  background:var(--cream2);
  border-top:1px solid var(--border);
  padding:2.5rem 2rem 2rem;
  margin-top:3rem
}

.sf-inner{
  max-width:1200px;
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1.5rem;
  flex-wrap:wrap
}

.sf-brand{
  font-family:var(--serif);
  font-size:1rem;
  font-weight:700;
  color:var(--ink);
  letter-spacing:-.03em
}

.sf-brand em{
  color:var(--rust);
  font-style:normal
}

.sf-copy{
  font-size:.78rem;
  color:var(--ink4);
  font-weight:300
}

.sf-links{
  display:flex;
  gap:1.5rem
}

.sf-links a{
  font-size:.78rem;
  color:var(--ink4);
  transition:color .18s
}

.sf-links a:hover{
  color:var(--rust)
}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:600px){
  .page-wrap{padding:1.25rem 1rem 3rem}
  .tool-inner{padding:1.25rem}
  .nav-links{display:none}
  .hamburger{display:flex}
  
  .items-table th,
  .items-table td{
    padding:.5rem .3rem;
    font-size:.78rem
  }
  
  .sf-inner{
    flex-direction:column;
    text-align:center
  }
}
</style>
</head>

<body>

<!-- ‚ïê‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê‚ïê -->
<nav class="nav" role="navigation" aria-label="Main navigation">
  <div class="nav-wrap">
    <a href="/" class="logo" aria-label="Researchtoolslab home">
      <div class="logo-mark" aria-hidden="true">R</div>
      <span class="logo-name">Research<em>tools</em>lab</span>
    </a>
    
    <ul class="nav-links" role="list">
      <li><a href="/">Home</a></li>
      <li><a href="/sample-size-calculator.html">Sample Size</a></li>
      <li><a href="/emi.html">Finance</a></li>
      <li><a href="/tiktok.html">Creator</a></li>
      <li><a href="/" class="nav-cta">‚Üê All Tools</a></li>
    </ul>
    
    <button class="hamburger" aria-label="Open menu" onclick="navToggle()">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<main>
<div class="page-wrap">

  <!-- ‚îÄ‚îÄ PAGE HEADER ‚îÄ‚îÄ -->
  <header class="page-header">
    <nav class="page-breadcrumb" aria-label="Breadcrumb">
      <a href="/">Researchtoolslab</a>
      <span aria-hidden="true">‚Ä∫</span>
      <span aria-current="page">PDF Invoice Generator</span>
    </nav>
    
    <h1 class="page-h1">Free PDF <em>Invoice</em> Generator</h1>
    <p class="page-sub">Professional invoices with logo, taxes, multiple currencies. Download instantly as PDF ‚Äî perfect for freelancers and small businesses.</p>
    
    <div class="page-badges">
      <span class="page-badge">üìÑ Instant PDF</span>
      <span class="page-badge">üîí Privacy-first</span>
      <span class="page-badge">üíº Business Ready</span>
      <span class="page-badge">‚úì Free Forever</span>
    </div>
  </header>

  <!-- ‚îÄ‚îÄ TOOL CARD ‚îÄ‚îÄ -->
  <div class="tool-card">
    <div class="tool-inner">
    
      <div class="info-box">
        This <strong>free PDF Invoice Generator</strong> helps <strong>small businesses, freelancers, and startups</strong> create professional invoices instantly. Upload your logo, add client details, items with prices, apply taxes (GST/VAT), select currency, and download as PDF. Fully client-side ‚Äî your data never leaves your browser.
      </div>

      <div class="form-row">
        <label>Your Business Name</label>
        <input type="text" id="business" placeholder="Your Business Name">
      </div>

      <div class="form-row">
        <label>Client Name</label>
        <input type="text" id="client" placeholder="Client Name">
      </div>

      <div class="form-row">
        <label>Invoice Number</label>
        <input type="text" id="invoiceNo" value="1001">
      </div>

      <div class="form-row">
        <label>Invoice Date</label>
        <input type="date" id="date">
      </div>

      <div class="form-row">
        <label>Currency</label>
        <select id="currency">
          <option value="$">USD ($)</option>
          <option value="‚Ç¨">EUR (‚Ç¨)</option>
          <option value="‚Çπ">INR (‚Çπ)</option>
          <option value="¬£">GBP (¬£)</option>
        </select>
      </div>

      <div class="form-row">
        <label>Tax % <span class="hint">GST/VAT</span></label>
        <input type="number" id="tax" placeholder="e.g. 18" step="0.01" value="0">
      </div>

      <div class="slabel">Invoice Items</div>
      <table class="items-table" id="items">
        <thead>
          <tr>
            <th>Description</th>
            <th style="width:80px">Qty</th>
            <th style="width:100px">Price</th>
            <th style="width:100px">Total</th>
            <th style="width:80px">Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <button class="btn-add" onclick="addItem()">+ Add Item</button>

      <div class="form-row">
        <label>Notes / Terms <span class="hint">Optional</span></label>
        <textarea id="notes" placeholder="Payment terms, thank you note, etc."></textarea>
      </div>

      <div class="form-row">
        <label>Upload Logo <span class="hint">Optional, max 150x80px, PNG/JPEG</span></label>
        <input type="file" id="logo" accept="image/png,image/jpeg">
        <img id="logoPreview" alt="Logo Preview">
        <div id="logoStatus" class="status"></div>
      </div>

      <button class="btn-generate" onclick="generateInvoice()">üì• Generate PDF Invoice</button>

      <div id="preview" class="result-box"></div>

    </div><!-- /tool-inner -->
  </div><!-- /tool-card -->

</div><!-- /page-wrap -->
</main>

<!-- ‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê -->
<footer class="site-footer" role="contentinfo">
  <div class="sf-inner">
    <div class="sf-brand">Research<em>tools</em>lab</div>
    <p class="sf-copy">¬© 2025 Researchtoolslab ¬∑ Privacy-friendly ¬∑ Client-side only ¬∑ Free forever</p>
    <nav class="sf-links" aria-label="Footer links">
      <a href="/">All Tools</a>
      <a href="#">Privacy</a>
      <a href="#">About</a>
    </nav>
  </div>
</footer>

<!-- ‚ïê‚ïê‚ïê‚ïê MOBILE NAV ‚ïê‚ïê‚ïê‚ïê -->
<div id="mob-drawer" style="display:none;position:fixed;top:62px;left:0;right:0;bottom:0;background:rgba(245,240,232,.98);backdrop-filter:blur(20px);z-index:199;padding:2rem;flex-direction:column;gap:.5rem" role="dialog" aria-label="Mobile navigation">
  <a href="/" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üè† Home ‚Äî All Tools</a>
  <a href="/sample-size-calculator.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üìä Sample Size Calculator</a>
  <a href="/emi.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üí∞ Loan / EMI Calculator</a>
  <a href="/tiktok.html" style="display:block;padding:.9rem 1rem;font-size:1rem;font-weight:500;color:var(--ink);border-bottom:1px solid var(--border)" onclick="navClose()">üéµ TikTok Earnings</a>
</div>

<script>
const itemsBody = document.querySelector("#items tbody");
const logoInput = document.getElementById("logo");
const logoPreview = document.getElementById("logoPreview");
const logoStatus = document.getElementById("logoStatus");
let logoData = null;

// Set today's date and load invoice number
document.getElementById("date").valueAsDate = new Date();
document.getElementById("invoiceNo").value = localStorage.getItem("invoiceNo") || "1001";

// Initial row
addItem();

// Resize logo to square
function resizeLogoToSquare(imageData, size = 50) {
  return new Promise(resolve => {
    const img = new Image();
    img.onload = () => {
      const canvas = document.createElement("canvas");
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext("2d");
      ctx.fillStyle = "#fff";
      ctx.fillRect(0,0,size,size);
      let scale = Math.min(size/img.width, size/img.height);
      let w = img.width*scale;
      let h = img.height*scale;
      let x = (size-w)/2;
      let y = (size-h)/2;
      ctx.drawImage(img,x,y,w,h);
      resolve(canvas.toDataURL("image/png"));
    };
    img.src = imageData;
  });
}

// Logo upload
logoInput.addEventListener("change", e=>{
  const file = e.target.files[0];
  if(!file) return;
  
  if(!["image/png","image/jpeg"].includes(file.type)){
    logoStatus.textContent = "‚ùå Unsupported format! Only PNG or JPEG allowed.";
    logoStatus.className="status error show";
    logoData = null;
    logoPreview.classList.remove("show");
    return;
  }
  
  if(file.size > 500*1024){
    logoStatus.textContent = "‚ö†Ô∏è File too large! Max 500KB recommended.";
    logoStatus.className="status error show";
    logoData = null;
    logoPreview.classList.remove("show");
    return;
  }
  
  const reader = new FileReader();
  reader.onload = () => {
    logoData = reader.result;
    logoPreview.src = logoData;
    logoPreview.classList.add("show");
    logoStatus.textContent = "‚úì Logo loaded successfully!";
    logoStatus.className="status success show";
  };
  reader.readAsDataURL(file);
});

// Add item row
function addItem(){
  const row = document.createElement("tr");
  row.innerHTML = `
    <td contenteditable>Item Description</td>
    <td contenteditable>1</td>
    <td contenteditable>0.00</td>
    <td>0.00</td>
    <td><button class="remove-btn">Remove</button></td>
  `;
  itemsBody.appendChild(row);
  
  // Calculate total on input
  const qtyCell = row.cells[1];
  const priceCell = row.cells[2];
  const totalCell = row.cells[3];
  
  function updateTotal(){
    const qty = parseFloat(qtyCell.textContent) || 0;
    const price = parseFloat(priceCell.textContent) || 0;
    totalCell.textContent = (qty * price).toFixed(2);
  }
  
  qtyCell.addEventListener("input", updateTotal);
  priceCell.addEventListener("input", updateTotal);
  
  row.querySelector(".remove-btn").addEventListener("click", ()=> {
    if(itemsBody.children.length > 1){
      row.remove();
    } else {
      alert("At least one item is required!");
    }
  });
}

// PDF generation
async function generateInvoice(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  
  const business = document.getElementById("business").value || "Your Business";
  const client = document.getElementById("client").value || "Client Name";
  const invoiceNo = document.getElementById("invoiceNo").value;
  const date = document.getElementById("date").value || new Date().toISOString().slice(0,10);
  const currency = document.getElementById("currency").value;
  const taxRate = parseFloat(document.getElementById("tax").value) || 0;
  const notes = document.getElementById("notes").value;
  
  let y = 20;
  
  // Add logo
  if(logoData){
    try{
      const resizedLogo = await resizeLogoToSquare(logoData,50);
      doc.addImage(resizedLogo,"PNG",20,10,50,50);
    }catch(e){
      console.error("Logo error:", e);
    }
  }
  
  // Header
  doc.setFontSize(18);
  doc.text("INVOICE",150,20,{align:"right"});
  y+=10;
  
  doc.setFontSize(11);
  doc.text(`Invoice #: ${invoiceNo}`,150,30,{align:"right"});
  doc.text(`Date: ${date}`,150,36,{align:"right"});
  
  y+=16;
  doc.text(`From: ${business}`,20,y);
  y+=8;
  doc.text(`Bill To: ${client}`,20,y);
  y+=12;
  
  // Table headers
  doc.text("Description",20,y);
  doc.text("Qty",110,y);
  doc.text("Price",130,y);
  doc.text("Total",160,y);
  y+=6;
  
  let subtotal = 0;
  [...itemsBody.children].forEach(r=>{
    const desc = r.cells[0].innerText;
    const qty = parseFloat(r.cells[1].innerText) || 0;
    const price = parseFloat(r.cells[2].innerText) || 0;
    const total = qty*price;
    subtotal += total;
    
    doc.text(desc,20,y);
    doc.text(qty.toString(),110,y);
    doc.text(price.toFixed(2),130,y);
    doc.text(total.toFixed(2),160,y);
    y+=6;
  });
  
  const taxAmt = subtotal*taxRate/100;
  const total = subtotal+taxAmt;
  
  y+=6;
  doc.text(`Subtotal: ${currency}${subtotal.toFixed(2)}`,130,y);
  y+=6;
  doc.text(`Tax (${taxRate}%): ${currency}${taxAmt.toFixed(2)}`,130,y);
  y+=6;
  doc.setFontSize(12);
  doc.text(`Total: ${currency}${total.toFixed(2)}`,130,y);
  
  if(notes){
    y+=10;
    doc.setFontSize(11);
    doc.text("Notes:",20,y);
    y+=6;
    doc.text(notes,20,y,{maxWidth:170});
  }
  
  try{
    doc.save(`Invoice_${invoiceNo}.pdf`);
    document.getElementById("preview").innerHTML = `<strong>‚úì Invoice generated successfully!</strong><br>Total: ${currency}${total.toFixed(2)}`;
    document.getElementById("preview").classList.add("show");
    localStorage.setItem("invoiceNo",Number(invoiceNo)+1);
  }catch(e){
    document.getElementById("preview").innerHTML = `‚ùå Failed to generate PDF: ${e}`;
    document.getElementById("preview").className="result-box show";
    document.getElementById("preview").style.background="var(--err-l)";
    document.getElementById("preview").style.borderColor="var(--err-b)";
  }
}

// Mobile nav
var _navOpen = false;
function navToggle(){
  _navOpen = !_navOpen;
  var d = document.getElementById('mob-drawer');
  var sp = document.querySelectorAll('.hamburger span');
  d.style.display = _navOpen ? 'flex' : 'none';
  if(_navOpen){
    sp[0].style.transform = 'rotate(45deg) translate(5px,5px)';
    sp[1].style.opacity = '0';
    sp[2].style.transform = 'rotate(-45deg) translate(5px,-5px)';
  } else {
    sp.forEach(function(s){ s.style.transform=''; s.style.opacity=''; });
  }
}

function navClose(){
  _navOpen = false;
  document.getElementById('mob-drawer').style.display = 'none';
  document.querySelectorAll('.hamburger span').forEach(function(s){ s.style.transform=''; s.style.opacity=''; });
}
</script>

</body>
</html>
